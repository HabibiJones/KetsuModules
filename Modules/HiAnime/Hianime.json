{
    "moduleInfo": {
      "moduleName": "HiAnime",
      "moduleInitials": "HAR",
      "moduleDesc": "HiAnime Moduler Viewer Refactored",
      "changelog": "Fixed async issues",
      "developer": "Scrumptious",
      "moduleID": "20240409",
      "moduleImage": "data:image/webp;base64,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",
      "moduleVersion": 1.02,
      "moduleLenguage": "ENG",
      "moduleType": "Video",
      "baseURL": "https://hianime.to/",
      "moduleDeveloperSite": "https://github.com/OffsetParts/KetsuModules/",
      "UpdateSite": "https://raw.githubusercontent.com/OffsetParts/KetsuModules/master/Modules/HiAnime/HiAnime.json",
      "preferedServer": "MEGACLOUD",
      "preferedDownloadServer": "MEGACLOUD",
      "blackListed": [
        ""
      ]
    },
    "global": {
      "variables": [
        {
          "key": "",
          "value": ""
        }
      ],
      "cookies": [
        {
          "key": "",
          "value": ""
        }
      ],
      "headers": [
        {
          "key": "",
          "value": ""
        }
      ]
    },
    "mainPage": [
      {
        "request": {
          "url": "https://hianime.to/home/",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": true,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ const DefaultLayouts = {\n        ultraWideFull: 'ultraWideFull',\n        ultraWide: 'ultraWide',\n        wideFull: 'wideFull',\n        wide: 'wide',\n        wideStrechedFull: 'wideStrechedFull',\n        wideStrechedFullDouble: 'WideStrechedFullDouble',\n        wideStreched: 'wideStreched',\n        wideStrechedDouble: 'wideStrechedDouble',\n        wideStrechedFullList: 'wideStrechedFullList',\n        wideStrechedList: 'wideStrechedList',\n        doublets: 'doublets',\n        doubletsDouble: 'doubletsDouble',\n        doubletsFull: 'doubletsFull',\n        doubletsFullDouble: 'doubletsFullDouble',\n        doubletsConstant: 'doubletsConstant',\n        doubletsDoubleConstant: 'doubletsDoubleConstant',\n        doubletsFullConstant: 'doubletsFullConstant',\n        doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n        longDoublets: 'longDoublets',\n        longDoubletsDouble: 'longDoubletsDouble',\n        longDoubletsFull: 'longDoubletsFull',\n        longDoubletsFullDouble: 'longDoubletsFullDouble',\n        longDoubletsConstant: 'longDoubletsConstant',\n        longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n        longDoubletsFullConstant: 'longDoubletsFullConstant',\n        longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n        triplets: 'triplets',\n        tripletsDouble: 'tripletsDouble',\n        tripletsFull: 'tripletsFull',\n        tripletsFullDouble: 'tripletsFullDouble',\n        tripletsConstant: 'tripletsConstant',\n        tripletsDoubleConstant: 'tripletsDoubleConstant',\n        tripletsFullConstant: 'tripletsFullConstant',\n        tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n        longTriplets: 'longTriplets',\n        longTripletsDouble: 'longTripletsDouble',\n        longTripletsFull: 'longTripletsFull',\n        longTripletsFullDouble: 'longTripletsFullDouble',\n        longTripletsConstant: 'longTripletsConstant',\n        longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n        longTripletsFullConstant: 'longTripletsFullConstant',\n        longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n        none: ''\n};\nconst CellDesings = {\n        Special1: 'Special1',\n        Special2: 'Special2',\n        Special3: 'Special3',\n        CELLHelperText: 'CELLHelperText',\n        small1: 'small1',\n        small2: 'small2',\n        normal1: 'normal1',\n        normal2: 'normal2',\n        normal3: 'normal3',\n        normal4: 'normal4',\n        normal5: 'normal5',\n        normal6: 'normal6',\n        normal7: 'normal7',\n        wide1: 'wide1',\n        wide2: 'wide2',\n        wide3: 'wide3',\n        wide4: 'wide4',\n        wide5: 'wide5',\n        wide6: 'wide6',\n        wide7: 'wide7',\n        wide8: 'wide8',\n        wide9: 'wide9',\n        wide10: 'wide10',\n        wide11: 'wide11'\n};\nconst Paging = {\n        leading: 'leading',\n        centered: 'centered',\n        none: ''\n};\nconst Orientation = {\n        horizontal: 'horizontal',\n        vertical: 'vertical'\n};\nconst RatioRelation = {\n        width: 'width',\n        height: 'height'\n};\n\nfunction MainPage ( request, extra, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Insets ( top, bottom, left, right ) {\n        this.top = top;\n        this.bottom = bottom;\n        this.left = left;\n        this.right = right\n}\n\nfunction Size ( width, height ) {\n        this.width = width;\n        this.height = height\n}\n\nfunction Ratio ( inRelation, number1, number2 ) {\n        this.inRelation = inRelation;\n        this.number1 = number1;\n        this.number2 = number2\n}\n\nfunction Section ( sectionName, separator ) {\n        this.sectionName = sectionName;\n        this.separator = separator\n}\n\nfunction Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n        this.insets = insets;\n        this.visibleCellsWidthS = visibleCellsWidthS;\n        this.visibleCellsWidthM = visibleCellsWidthM;\n        this.visibleCellsWidthL = visibleCellsWidthL;\n        this.visibleCellsHeight = visibleCellsHeight;\n        this.heightForVisibleCells = heightForVisibleCells;\n        this.cellSize = cellSize;\n        this.ratio = ratio;\n        this.constant = constant;\n        this.horizontalSpacing = horizontalSpacing;\n        this.verticalSpacing = verticalSpacing\n}\n\nfunction Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n        this.image = image;\n        this.title = title;\n        this.description = description;\n        this.field1 = field1;\n        this.field2 = field2;\n        this.field3 = field3;\n        this.field4 = field4;\n        this.isChapter = isChapter;\n        this.link = link;\n        this.openInWebView = openInWebView\n}\n\nfunction Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n        this.cellDesing = cellDesing;\n        this.orientation = orientation;\n        this.defaultLayout = defaultLayout;\n        this.paging = paging;\n        this.section = section;\n        this.layout = layout;\n        this.data = data\n}\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nvar emptyKeyValue = [ new KeyValue( '', '' ) ];\nlet XHRequest = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\nvar commands = [ new Commands( 'helperFunctions', [ new KeyValue( 'isCustomRequest', 'true' ) ] ) ];\nlet emptyExtra = new Extra( commands, emptyKeyValue );\nconst dummyRequest = new ModuleRequest( '', 'get', emptyKeyValue, null );\nconst ZoroReplacement = new ModuleRequest( 'ketsuapp://?moduleData=https://raw.githubusercontent.com/Bilnaa/beta-ketsu/main/zoro.json', 'get', emptyKeyValue, null );\nconst infoText = new Data( dummyRequest, `Subs are only available on newer versions of Ketsu,and the RapidCloud resolver won't work if you have the App Store version.\\nClick on this message if you are using the App Store version of KETSU and not getting subtitles. If you do so don't forget to refresh this page.`, '', '', '', '', '', false, ZoroReplacement, false );\nlet output = [ ];\n\nfunction createLayout ( insets, size, ratio ) {\n        return new Layout( insets, 1, 1, 1, 1, 0, size, ratio, new Size( 0, 0 ), 0, 0 )\n}\n\nfunction cleanText ( str ) {\n        return str?.replace( /[\\n\\t]/g, '' ).trim( ) ?? ''\n}\n\nfunction cleanUrl ( url ) {\n        return 'https://hianime.to' + ( url.replace( '/watch', '' ).replace( '?w=latest', '' ) ).trim( )\n}\n\nfunction quickRequest ( url, clean ) {\n        if ( clean == true ) {\n                return new ModuleRequest( cleanUrl( url ), 'get', emptyKeyValue, null )\n        } else if ( clean == false || clean == null ) {\n                return new ModuleRequest( url, 'get', emptyKeyValue, null )\n        }\n}\nvar topSlider = document.querySelectorAll( '#slider .swiper-wrapper .swiper-slide' );\nvar loggedTitles = new Set( );\nvar Spotlight = Array.from( topSlider ).map( slide => {\n        var title = cleanText( slide.querySelector( 'div.desi-head-title' ).textContent );\n        var image = quickRequest( slide.querySelector( 'img' ).dataset?.src );\n        let link = quickRequest( slide.querySelector( 'div.desi-buttons a' ).href, true );\n        var airing = cleanText( 'First Aired: ' + slide.querySelector( 'div.sc-detail > div:nth-child(3)' ).textContent );\n        if ( !loggedTitles.has( title ) ) {\n                loggedTitles.add( title );\n                return new Data( image, '', '', title, airing, '', '', false, link, false )\n        }\n} );\nvar risingTides = document.querySelectorAll( 'div [class=trending-list] > div > div > div' );\nvar Trending = Array.from( risingTides ).map( list => {\n        var title = list.querySelector( '[class*=title]' ).textContent;\n        var image = quickRequest( list.querySelector( 'img' ).dataset?.src );\n        let link = quickRequest( list.querySelector( 'a' ).href, true );\n        return new Data( image, title, '', '', '', '', '', false, link, false )\n} );\nvar bestAiring = document.querySelectorAll( 'div.anif-block-01 li' );\nvar TopAiring = Array.from( bestAiring ).map( list => {\n        var title = list.querySelector( 'h3' ).textContent;\n        var image = quickRequest( list.querySelector( 'img' ).dataset?.src );\n        let link = quickRequest( list.querySelector( 'a' ).href, true );\n        return new Data( image, title, '', '', '', '', '', false, link, false )\n} );\nvar popularArray = document.querySelectorAll( 'div.anif-block-03 li' );\nvar Popular = Array.from( popularArray ).map( list => {\n        var title = list.querySelector( 'h3' ).textContent;\n        var image = quickRequest( list.querySelector( 'img' ).dataset?.src );\n        let link = quickRequest( list.querySelector( 'a' )?.href, true ) ?? null;\n        if ( !link ) return;\n        var ticks = Array.from( list.querySelectorAll( 'div.tick-item' ) ) ?? [ ];\n        var [ tickSub, tickDub ] = ticks;\n        let language = ticks.length > 1 && tickSub?.classList.contains( 'tick-sub' ) && tickDub?.classList.contains( 'tick-dub' ) ? 'SUB/DUB' : tickSub?.classList.contains( 'tick-sub' ) ? 'SUB' : tickDub?.classList.contains( 'tick-dub' ) ? 'DUB' : '';\n        var total = cleanText( list.querySelector( 'div.tick-eps' )?.textContent );\n        var subisode = cleanText( list.querySelector( 'div.tick-sub' )?.textContent );\n        var dubisode = cleanText( list.querySelector( 'div.tick-dub' )?.textContent );\n        let eps = total ? `${subisode}/${total}` : subisode && dubisode ? `${subisode}/${dubisode}` : subisode || dubisode;\n        return new Data( image, title, '', eps, language, '', '', false, link, false )\n} );\nvar newArray = Array.from( document.querySelectorAll( 'section.block_area_home' ) || [ ] ).find( e => e.querySelector( '.cat-heading' )?.textContent.includes( 'New' ) );\nvar NewAnimes = Array.from( newArray.querySelectorAll( 'div.flw-item' ) ).map( list => {\n        var imgElement = list.querySelector( 'img' );\n        var title = imgElement?.alt ?? 'Unknown Title';\n        var link = quickRequest( list.querySelector( 'a' )?.href, true ) ?? null;\n        if ( !link ) return;\n        var image = quickRequest( imgElement.dataset?.src ?? '' );\n        var ticks = Array.from( list.querySelectorAll( 'div.tick-item' ) ) ?? [ ];\n        var [ tickSub, tickDub ] = ticks;\n        let language = ticks.length > 1 && tickSub?.classList.contains( 'tick-sub' ) && tickDub?.classList.contains( 'tick-dub' ) ? 'SUB/DUB' : tickSub?.classList.contains( 'tick-sub' ) ? 'SUB' : tickDub?.classList.contains( 'tick-dub' ) ? 'DUB' : '';\n        var total = cleanText( list.querySelector( 'div.tick-eps' )?.textContent );\n        var subisode = cleanText( list.querySelector( 'div.tick-sub' )?.textContent );\n        var dubisode = cleanText( list.querySelector( 'div.tick-dub' )?.textContent );\n        let eps = total ? `${subisode}/${total}` : subisode && dubisode ? `${subisode}/${dubisode}` : subisode || dubisode;\n        return new Data( image, title, '', eps, language, '', '', false, link )\n} );\nlet weeklyArray = Array.from( document.querySelectorAll( '#top-viewed-week > ul > li' ) );\nlet Weekly = Array.from( weeklyArray ).map( list => {\n        var title = list.querySelector( 'a' ).title;\n        const link = quickRequest( list.querySelector( 'a' ).href, true );\n        var image = quickRequest( list.querySelector( 'img' ).dataset.src );\n        return new Data( image, title, '', '', '', '', '', false, link )\n} );\nlet Poster = createLayout( new Insets( 0, 0, 0, 0 ), new Size( 400, 105 ), new Ratio( 'width', 6, 10 ) );\noutput.push( new Output( CellDesings.Special3, Orientation.horizontal, DefaultLayouts.none, Paging.leading, new Section( 'Spotlight', true ), Poster, Spotlight ) );\noutput.push( new Output( CellDesings.wide4, Orientation.horizontal, DefaultLayouts.longDoublets, Paging.none, new Section( 'Trending', true ), null, Trending ) );\noutput.push( new Output( CellDesings.wide6, Orientation.horizontal, DefaultLayouts.longTriplets, Paging.none, new Section( 'Top Airing', true ), null, TopAiring ) );\noutput.push( new Output( CellDesings.wide6, Orientation.horizontal, DefaultLayouts.longDoubletsFull, Paging.leading, new Section( 'Popular', true ), null, Popular ) );\noutput.push( new Output( CellDesings.wide6, Orientation.horizontal, DefaultLayouts.longDoubletsDouble, Paging.none, new Section( 'New On HiAnime', true ), null, NewAnimes ) );\noutput.push( new Output( CellDesings.wide1, Orientation.horizontal, DefaultLayouts.longDoublets, Paging.none, new Section( 'Weekly Highlights', true ), null, Weekly ) );\nlet date = new Date( );\nlet year = date.getFullYear( );\nlet day = date.getDate( ).toString( ).padStart( 2, '0' );\nlet month = date.getMonth( ).toString( ).padStart( 2, '0' );\nlet timezoneOffset = date.getTimezoneOffset( );\nlet nextRequest = `https://hianime.to/ajax/schedule/list?tzOffset=${timezoneOffset}&date=${year}-${month}-${day}`;\nlet MainPageObject = new MainPage( new ModuleRequest( nextRequest, 'get', XHRequest, null ), emptyExtra, new JavascriptConfig( true, false, '' ), output );\nvar finalJson = JSON.stringify( MainPageObject );\nsavedData.innerHTML = finalJson;\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": [
          {
            "cellDesing": "normal1",
            "orientation": "vertical",
            "defaultLayout": "wide",
            "paging": "",
            "section": {
              "sectionName": "",
              "separator": false
            },
            "layout": {
              "insets": {
                "top": 0,
                "bottom": 0,
                "left": 0,
                "right": 0
              },
              "visibleCellsWidthS": 2,
              "visibleCellsWidthM": 2,
              "visibleCellsWidthL": 2,
              "visibleCellsHeight": 2,
              "heightForVisibleCells": 400,
              "cellSize": {
                "width": 300,
                "height": 300
              },
              "ratio": {
                "inRelation": "width",
                "number1": 1,
                "number2": 2
              },
              "constant": {
                "width": 1,
                "height": 2
              },
              "horizontalSpacing": 0,
              "verticalSpacing": 0
            },
            "data": [
              {
                "image": {
                  "url": "",
                  "method": "get",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                },
                "title": "",
                "description": "",
                "field1": "",
                "field2": "",
                "field3": "",
                "field4": "",
                "openInWebView": false,
                "isChapter": false,
                "link": {
                  "url": "",
                  "method": "",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                }
              }
            ]
          }
        ]
      },
      {
        "request": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": false,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ const DefaultLayouts={ultraWideFull:'ultraWideFull',ultraWide:'ultraWide',wideFull:'wideFull',wide:'wide',wideStrechedFull:'wideStrechedFull',wideStrechedFullDouble:'WideStrechedFullDouble',wideStreched:'wideStreched',wideStrechedDouble:'wideStrechedDouble',wideStrechedFullList:'wideStrechedFullList',wideStrechedList:'wideStrechedList',doublets:'doublets',doubletsDouble:'doubletsDouble',doubletsFull:'doubletsFull',doubletsFullDouble:'doubletsFullDouble',doubletsConstant:'doubletsConstant',doubletsDoubleConstant:'doubletsDoubleConstant',doubletsFullConstant:'doubletsFullConstant',doubletsFullDoubleConstant:'doubletsFullDoubleConstant',longDoublets:'longDoublets',longDoubletsDouble:'longDoubletsDouble',longDoubletsFull:'longDoubletsFull',longDoubletsFullDouble:'longDoubletsFullDouble',longDoubletsConstant:'longDoubletsConstant',longDoubletsDoubleConstant:'longDoubletsDoubleConstant',longDoubletsFullConstant:'longDoubletsFullConstant',longDoubletsFullDoubleConstant:'longDoubletsFullDoubleConstant',triplets:'triplets',tripletsDouble:'tripletsDouble',tripletsFull:'tripletsFull',tripletsFullDouble:'tripletsFullDouble',tripletsConstant:'tripletsConstant',tripletsDoubleConstant:'tripletsDoubleConstant',tripletsFullConstant:'tripletsFullConstant',tripletsFullDoubleConstant:'tripletsFullDoubleConstant',longTriplets:'longTriplets',longTripletsDouble:'longTripletsDouble',longTripletsFull:'longTripletsFull',longTripletsFullDouble:'longTripletsFullDouble',longTripletsConstant:'longTripletsConstant',longTripletsDoubleConstant:'longTripletsDoubleConstant',longTripletsFullConstant:'longTripletsFullConstant',longTripletsFullDoubleConstant:'longTripletsFullDoubleConstant',none:''};const CellDesings={Special1:'Special1',Special2:'Special2',Special3:'Special3',CELLHelperText:'CELLHelperText',small1:'small1',small2:'small2',normal1:'normal1',normal2:'normal2',normal3:'normal3',normal4:'normal4',normal5:'normal5',normal6:'normal6',normal7:'normal7',wide1:'wide1',wide2:'wide2',wide3:'wide3',wide4:'wide4',wide5:'wide5',wide6:'wide6',wide7:'wide7',wide8:'wide8',wide9:'wide9',wide10:'wide10',wide11:'wide11'};const Paging={leading:'leading',centered:'centered',none:''};const Orientation={horizontal:'horizontal',vertical:'vertical'};function MainPage(request,extra,javascriptConfig,output){this.request=request;this.extra=extra;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Output(cellDesing,orientation,defaultLayout,paging,section,layout,data){this.cellDesing=cellDesing;this.orientation=orientation;this.defaultLayout=defaultLayout;this.paging=paging;this.section=section;this.layout=layout;this.data=data}function Section(sectionName,separator){this.sectionName=sectionName;this.separator=separator}function Layout(insets,visibleCellsWidthS,visibleCellsWidthM,visibleCellsWidthL,visibleCellsHeight,heightForVisibleCells,cellSize,ratio,constant,horizontalSpacing,verticalSpacing){this.insets=insets;this.visibleCellsWidthS=visibleCellsWidthS;this.visibleCellsWidthM=visibleCellsWidthM;this.visibleCellsWidthL=visibleCellsWidthL;this.visibleCellsHeight=visibleCellsHeight;this.heightForVisibleCells=heightForVisibleCells;this.cellSize=cellSize;this.ratio=ratio;this.constant=constant;this.horizontalSpacing=horizontalSpacing;this.verticalSpacing=verticalSpacing}function Insets(top,bottom,left,right){this.top=top;this.bottom=bottom;this.left=left;this.right=right}function Size(width,height){this.width=width;this.height=height}function Ratio(inRelation,number1,number2){this.inRelation=inRelation;this.number1=number1;this.number2=number2}function Data(image,title,description,field1,field2,field3,field4,isChapter,link,openInWebView){this.image=image;this.title=title;this.description=description;this.field1=field1;this.field2=field2;this.field3=field3;this.field4=field4;this.isChapter=isChapter;this.link=link;this.openInWebView=openInWebView}function cleanText(str){return str?.replace(/[\\n\\t]/g,'').trim()??''}function cleanUrl(url){return'https://hianime.to'+(url.replace('/watch','').replace('?w=latest','')).trim()}function quickRequest(url,clean){if(clean==true){return new ModuleRequest(cleanUrl(url),'get',emptyKeyValue,null)}else if(clean==false||clean==null){return new ModuleRequest(url,'get',emptyKeyValue,null)}}function checkTime(){var now=new Date();var hour=now.getHours();var minute=now.getMinutes();var time=hour+':'+minute;return time}var actualtime=checkTime();var savedData=document.getElementById('ketsu-final-data');var parsedJson=JSON.parse(savedData.innerHTML);let emptyKeyValue=[new KeyValue('','')];let XHRequest=[new KeyValue('X-Requested-With','XMLHttpRequest')];var nextRequest='';let output=parsedJson.output;var format=document.querySelector('script').innerText.replace('*/','').replace('/*','');var htmldom=new DOMParser().parseFromString(JSON.parse(format).html,'text/html');var scheduleList=htmldom.querySelectorAll('li');let Schedule=Array.from(scheduleList).filter(anime=>{var time=cleanText(anime.querySelector('.time').innerText);return(parseInt(time.split(':')[0])>parseInt(actualtime.split(':')[0])||(parseInt(time.split(':')[0])==parseInt(actualtime.split(':')[0])&&parseInt(time.split(':')[1])>parseInt(actualtime.split(':')[1])))}).map(anime=>{var blankRequest=new ModuleRequest('','get',emptyKeyValue,null);var link=quickRequest(anime.querySelector('a').getAttribute('href'),true);var episode=cleanText(anime.querySelector('.fd-play').innerText);var time=cleanText(anime.querySelector('.time').innerText);var title=time+' - '+cleanText(anime.querySelector('h3').innerText)+' '+episode;return new Data(blankRequest,title,'','','','','',false,link,false)});var testLayout=new Layout(new Insets(0,0,10,10),1,2,3,6,300,new Size(0,0),null,new Size(0,0),0,0);if(Schedule.length===0){let date=new Date();date.setDate(date.getDate()+1);let year=date.getFullYear();let month=String(date.getMonth()+1).padStart(2,'0');let day=String(date.getDate()).padStart(2,'0');let timezoneOffset=date.getTimezoneOffset();nextRequest=`https://hianime.to/ajax/schedule/list?tzOffset=${timezoneOffset}&date=${year}-${month}-${day}`}else{output.push(new Output(CellDesings.small2,Orientation.vertical,DefaultLayouts.none,Paging.leading,new Section('Airs Today:',true),testLayout,Schedule))}let MainPageObject=new MainPage(new ModuleRequest(nextRequest,'get',XHRequest,null),new Extra([new Commands('',emptyKeyValue)],emptyKeyValue),new JavascriptConfig(true,false,''),output);var finalJson=JSON.stringify(MainPageObject);savedData.innerHTML=finalJson;window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage(''); /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": [
          {
            "cellDesing": "normal1",
            "orientation": "vertical",
            "defaultLayout": "wide",
            "paging": "",
            "section": {
              "sectionName": "",
              "separator": false
            },
            "layout": {
              "insets": {
                "top": 0,
                "bottom": 0,
                "left": 0,
                "right": 0
              },
              "visibleCellsWidthS": 2,
              "visibleCellsWidthM": 2,
              "visibleCellsWidthL": 2,
              "visibleCellsHeight": 2,
              "heightForVisibleCells": 400,
              "cellSize": {
                "width": 300,
                "height": 300
              },
              "ratio": {
                "inRelation": "width",
                "number1": 1,
                "number2": 2
              },
              "constant": {
                "width": 1,
                "height": 2
              },
              "horizontalSpacing": 0,
              "verticalSpacing": 0
            },
            "data": [
              {
                "image": {
                  "url": "",
                  "method": "get",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                },
                "title": "",
                "description": "",
                "field1": "",
                "field2": "",
                "field3": "",
                "field4": "",
                "openInWebView": false,
                "isChapter": false,
                "link": {
                  "url": "",
                  "method": "",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                }
              }
            ]
          }
        ]
      },
      {
        "request": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": false,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ const DefaultLayouts={ultraWideFull:'ultraWideFull',ultraWide:'ultraWide',wideFull:'wideFull',wide:'wide',wideStrechedFull:'wideStrechedFull',wideStrechedFullDouble:'WideStrechedFullDouble',wideStreched:'wideStreched',wideStrechedDouble:'wideStrechedDouble',wideStrechedFullList:'wideStrechedFullList',wideStrechedList:'wideStrechedList',doublets:'doublets',doubletsDouble:'doubletsDouble',doubletsFull:'doubletsFull',doubletsFullDouble:'doubletsFullDouble',doubletsConstant:'doubletsConstant',doubletsDoubleConstant:'doubletsDoubleConstant',doubletsFullConstant:'doubletsFullConstant',doubletsFullDoubleConstant:'doubletsFullDoubleConstant',longDoublets:'longDoublets',longDoubletsDouble:'longDoubletsDouble',longDoubletsFull:'longDoubletsFull',longDoubletsFullDouble:'longDoubletsFullDouble',longDoubletsConstant:'longDoubletsConstant',longDoubletsDoubleConstant:'longDoubletsDoubleConstant',longDoubletsFullConstant:'longDoubletsFullConstant',longDoubletsFullDoubleConstant:'longDoubletsFullDoubleConstant',triplets:'triplets',tripletsDouble:'tripletsDouble',tripletsFull:'tripletsFull',tripletsFullDouble:'tripletsFullDouble',tripletsConstant:'tripletsConstant',tripletsDoubleConstant:'tripletsDoubleConstant',tripletsFullConstant:'tripletsFullConstant',tripletsFullDoubleConstant:'tripletsFullDoubleConstant',longTriplets:'longTriplets',longTripletsDouble:'longTripletsDouble',longTripletsFull:'longTripletsFull',longTripletsFullDouble:'longTripletsFullDouble',longTripletsConstant:'longTripletsConstant',longTripletsDoubleConstant:'longTripletsDoubleConstant',longTripletsFullConstant:'longTripletsFullConstant',longTripletsFullDoubleConstant:'longTripletsFullDoubleConstant',none:''};const CellDesings={Special1:'Special1',Special2:'Special2',Special3:'Special3',CELLHelperText:'CELLHelperText',small1:'small1',small2:'small2',normal1:'normal1',normal2:'normal2',normal3:'normal3',normal4:'normal4',normal5:'normal5',normal6:'normal6',normal7:'normal7',wide1:'wide1',wide2:'wide2',wide3:'wide3',wide4:'wide4',wide5:'wide5',wide6:'wide6',wide7:'wide7',wide8:'wide8',wide9:'wide9',wide10:'wide10',wide11:'wide11'};const Paging={leading:'leading',centered:'centered',none:''};const Orientation={horizontal:'horizontal',vertical:'vertical'};function MainPage(request,extra,javascriptConfig,output){this.request=request;this.extra=extra;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Output(cellDesing,orientation,defaultLayout,paging,section,layout,data){this.cellDesing=cellDesing;this.orientation=orientation;this.defaultLayout=defaultLayout;this.paging=paging;this.section=section;this.layout=layout;this.data=data}function Section(sectionName,separator){this.sectionName=sectionName;this.separator=separator}function Layout(insets,visibleCellsWidthS,visibleCellsWidthM,visibleCellsWidthL,visibleCellsHeight,heightForVisibleCells,cellSize,ratio,constant,horizontalSpacing,verticalSpacing){this.insets=insets;this.visibleCellsWidthS=visibleCellsWidthS;this.visibleCellsWidthM=visibleCellsWidthM;this.visibleCellsWidthL=visibleCellsWidthL;this.visibleCellsHeight=visibleCellsHeight;this.heightForVisibleCells=heightForVisibleCells;this.cellSize=cellSize;this.ratio=ratio;this.constant=constant;this.horizontalSpacing=horizontalSpacing;this.verticalSpacing=verticalSpacing}function Insets(top,bottom,left,right){this.top=top;this.bottom=bottom;this.left=left;this.right=right}function Size(width,height){this.width=width;this.height=height}function Ratio(inRelation,number1,number2){this.inRelation=inRelation;this.number1=number1;this.number2=number2}function Data(image,title,description,field1,field2,field3,field4,isChapter,link,openInWebView){this.image=image;this.title=title;this.description=description;this.field1=field1;this.field2=field2;this.field3=field3;this.field4=field4;this.isChapter=isChapter;this.link=link;this.openInWebView=openInWebView}function cleanText(str){return str?.replace(/[\\n\\t]/g,'').trim()??''}function cleanUrl(url){return'https://hianime.to'+url.replace('/watch','').trim()}function quickRequest(url,clean){if(clean==true){return new ModuleRequest(cleanUrl(url),'get',emptyKeyValue,null)}else if(clean==false||clean==null){return new ModuleRequest(url,'get',emptyKeyValue,null)}}function checkTime(){var now=new Date();var hour=now.getHours();var minute=now.getMinutes();var time=hour+':'+minute;return time}var actualtime=checkTime();var savedData=document.getElementById('ketsu-final-data');var parsedJson=JSON.parse(savedData.innerHTML);let emptyKeyValue=[new KeyValue('','')];let output=parsedJson.output;var format=document.querySelector('script').innerText.replace('*/','').replace('/*','');var htmldom=new DOMParser().parseFromString(JSON.parse(format).html,'text/html');var scheduleList=htmldom.querySelectorAll('li');let Schedule=Array.from(scheduleList).map(anime=>{var blankRequest=new ModuleRequest('','get',emptyKeyValue,null);var link=quickRequest(anime.querySelector('a').href,true);var episode=cleanText(anime.querySelector('.fd-play').innerText);var time=cleanText(anime.querySelector('.time').innerText);var title=time+' - '+cleanText(anime.querySelector('h3').innerText)+' '+episode;return new Data(blankRequest,title,'','','','','',false,link,false)});var textLayout=new Layout(new Insets(0,0,10,10),1,2,3,6,300,new Size(0,0),null,new Size(0,0),0,0);output.push(new Output(CellDesings.small2,Orientation.vertical,DefaultLayouts.none,Paging.leading,new Section('Airs Tomorrow:',true),textLayout,Schedule));let MainPageObject=new MainPage(new ModuleRequest('','get',emptyKeyValue,null),new Extra([new Commands('',emptyKeyValue)],emptyKeyValue),new JavascriptConfig(true,false,''),output);var finalJson=JSON.stringify(MainPageObject);savedData.innerHTML=finalJson;window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage(''); /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": [
          {
            "cellDesing": "normal1",
            "orientation": "vertical",
            "defaultLayout": "wide",
            "paging": "",
            "section": {
              "sectionName": "",
              "separator": false
            },
            "layout": {
              "insets": {
                "top": 0,
                "bottom": 0,
                "left": 0,
                "right": 0
              },
              "visibleCellsWidthS": 2,
              "visibleCellsWidthM": 2,
              "visibleCellsWidthL": 2,
              "visibleCellsHeight": 2,
              "heightForVisibleCells": 400,
              "cellSize": {
                "width": 300,
                "height": 300
              },
              "ratio": {
                "inRelation": "width",
                "number1": 1,
                "number2": 2
              },
              "constant": {
                "width": 1,
                "height": 2
              },
              "horizontalSpacing": 0,
              "verticalSpacing": 0
            },
            "data": [
              {
                "image": {
                  "url": "",
                  "method": "get",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                },
                "title": "",
                "description": "",
                "field1": "",
                "field2": "",
                "field3": "",
                "field4": "",
                "openInWebView": false,
                "isChapter": false,
                "link": {
                  "url": "",
                  "method": "",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                }
              }
            ]
          }
        ]
      }
    ],
    "search": [
      {
        "request": {
          "url": "https://hianime.to/search?keyword=<searched>&page=<page>",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "separator": "",
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": true,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ const DefaultLayouts = {\n        ultraWideFull: 'ultraWideFull',\n        ultraWide: 'ultraWide',\n        wideFull: 'wideFull',\n        wide: 'wide',\n        wideStrechedFull: 'wideStrechedFull',\n        wideStrechedFullDouble: 'WideStrechedFullDouble',\n        wideStreched: 'wideStreched',\n        wideStrechedDouble: 'wideStrechedDouble',\n        wideStrechedFullList: 'wideStrechedFullList',\n        wideStrechedList: 'wideStrechedList',\n        doublets: 'doublets',\n        doubletsDouble: 'doubletsDouble',\n        doubletsFull: 'doubletsFull',\n        doubletsFullDouble: 'doubletsFullDouble',\n        doubletsConstant: 'doubletsConstant',\n        doubletsDoubleConstant: 'doubletsDoubleConstant',\n        doubletsFullConstant: 'doubletsFullConstant',\n        doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n        longDoublets: 'longDoublets',\n        longDoubletsDouble: 'longDoubletsDouble',\n        longDoubletsFull: 'longDoubletsFull',\n        longDoubletsFullDouble: 'longDoubletsFullDouble',\n        longDoubletsConstant: 'longDoubletsConstant',\n        longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n        longDoubletsFullConstant: 'longDoubletsFullConstant',\n        longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n        triplets: 'triplets',\n        tripletsDouble: 'tripletsDouble',\n        tripletsFull: 'tripletsFull',\n        tripletsFullDouble: 'tripletsFullDouble',\n        tripletsConstant: 'tripletsConstant',\n        tripletsDoubleConstant: 'tripletsDoubleConstant',\n        tripletsFullConstant: 'tripletsFullConstant',\n        tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n        longTriplets: 'longTriplets',\n        longTripletsDouble: 'longTripletsDouble',\n        longTripletsFull: 'longTripletsFull',\n        longTripletsFullDouble: 'longTripletsFullDouble',\n        longTripletsConstant: 'longTripletsConstant',\n        longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n        longTripletsFullConstant: 'longTripletsFullConstant',\n        longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n        none: ''\n};\nconst CellDesings = {\n        Special1: 'Special1',\n        Special2: 'Special2',\n        Special3: 'Special3',\n        CELLHelperText: 'CELLHelperText',\n        small1: 'small1',\n        small2: 'small2',\n        normal1: 'normal1',\n        normal2: 'normal2',\n        normal3: 'normal3',\n        normal4: 'normal4',\n        normal5: 'normal5',\n        normal6: 'normal6',\n        normal7: 'normal7',\n        wide1: 'wide1',\n        wide2: 'wide2',\n        wide3: 'wide3',\n        wide4: 'wide4',\n        wide5: 'wide5',\n        wide6: 'wide6',\n        wide7: 'wide7',\n        wide8: 'wide8',\n        wide9: 'wide9',\n        wide10: 'wide10',\n        wide11: 'wide11'\n};\nconst Paging = {\n        leading: 'leading',\n        centered: 'centered',\n        none: ''\n};\nconst Orientation = {\n        horizontal: 'horizontal',\n        vertical: 'vertical'\n};\n\nfunction Search ( request, extra, separator, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.separator = separator;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n        this.cellDesing = cellDesing;\n        this.orientation = orientation;\n        this.defaultLayout = defaultLayout;\n        this.paging = paging;\n        this.section = section;\n        this.layout = layout;\n        this.data = data\n}\n\nfunction Section ( sectionName, separator ) {\n        this.sectionName = sectionName;\n        this.separator = separator\n}\n\nfunction Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n        this.insets = insets;\n        this.visibleCellsWidthS = visibleCellsWidthS;\n        this.visibleCellsWidthM = visibleCellsWidthM;\n        this.visibleCellsWidthL = visibleCellsWidthL;\n        this.visibleCellsHeight = visibleCellsHeight;\n        this.heightForVisibleCells = heightForVisibleCells;\n        this.cellSize = cellSize;\n        this.ratio = ratio;\n        this.constant = constant;\n        this.horizontalSpacing = horizontalSpacing;\n        this.verticalSpacing = verticalSpacing\n}\n\nfunction Insets ( top, bottom, left, right ) {\n        this.top = top;\n        this.bottom = bottom;\n        this.left = left;\n        this.right = right\n}\n\nfunction Size ( width, height ) {\n        this.width = width;\n        this.height = height\n}\n\nfunction Ratio ( inRelation, number1, number2 ) {\n        this.inRelation = inRelation;\n        this.number1 = number1;\n        this.number2 = number2\n}\n\nfunction Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n        this.image = image;\n        this.title = title;\n        this.description = description;\n        this.field1 = field1;\n        this.field2 = field2;\n        this.field3 = field3;\n        this.field4 = field4;\n        this.isChapter = isChapter;\n        this.link = link;\n        this.openInWebView = openInWebView\n}\n\nfunction cleanText ( str ) {\n        return str?.replace( /[\\n\\t]/g, '' ).trim( ) ?? ''\n}\n\nfunction cleanUrl ( url ) {\n        return 'https://hianime.to' + ( url.replace( '/watch', '' ).replace( '?w=latest', '' ) ).trim( )\n}\n\nfunction quickRequest ( url, clean ) {\n        if ( clean == true ) {\n                return new ModuleRequest( cleanUrl( url ), 'get', emptyKeyValue, null )\n        } else if ( clean == false || clean == null ) {\n                return new ModuleRequest( url, 'get', emptyKeyValue, null )\n        }\n}\nvar output = [ ];\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nlet emptyKeyValue = [ new KeyValue( '', '' ) ];\nlet results = document.querySelectorAll( '.film_list-wrap .flw-item' );\nlet Searches = Array.from( results ).map( short => {\n        let image = quickRequest( short.querySelector( 'img' ).dataset.src );\n        let title = cleanText( short.querySelector( 'img' ).alt );\n        let link = quickRequest( short.querySelector( 'a' ).href, true );\n        let nbEp = short.querySelector( '.tick-sub' )?.textContent.trim( ) || '';\n        let nbEpDub = short.querySelector( '.tick-dub' )?.textContent.trim( ) || '';\n        var duration = short.querySelector( '[class=fd-infor] > .fdi-duration' ).textContent;\n        let type = short.querySelector( '[class=fd-infor] > span' ).textContent;\n        let eps = nbEpDub && nbEp ? `${nbEp} subbed episodes | ${nbEpDub} dubbed episodes` : nbEp ? `${nbEp} episode${parseInt(nbEp)>1?'s':''}` : nbEpDub ? `${nbEpDub} episode${parseInt(nbEpDub)>1?'s':''}` : '';\n        return new Data( image, title, eps, duration, type, '', '', false, link, false )\n} );\nvar searchLayout = new Layout( new Insets( 10, 10, 10, 10 ), 1, 2, 3, 1, 500, new Size( 400, 400 ), new Ratio( 'width', 4, 11 ), new Size( 0, 0 ), 10, 10 );\noutput.push( new Output( CellDesings.wide8, Orientation.vertical, DefaultLayouts.none, Paging.none, new Section( '', true ), searchLayout, Searches ) );\nlet searchPageObject = new Search( new ModuleRequest( '', 'get', emptyKeyValue, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), '', new JavascriptConfig( true, false, '' ), output );\nvar finalJson = JSON.stringify( searchPageObject );\nsavedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage( '' );\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": [
          {
            "cellDesing": "normal1",
            "orientation": "vertical",
            "defaultLayout": "wide",
            "paging": "",
            "section": {
              "sectionName": "",
              "separator": false
            },
            "layout": {
              "insets": {
                "top": 0,
                "bottom": 0,
                "left": 0,
                "right": 0
              },
              "visibleCellsWidthS": 2,
              "visibleCellsWidthM": 2,
              "visibleCellsWidthL": 2,
              "visibleCellsHeight": 2,
              "heightForVisibleCells": 400,
              "cellSize": {
                "width": 300,
                "height": 300
              },
              "ratio": {
                "inRelation": "width",
                "number1": 1,
                "number2": 2
              },
              "constant": {
                "width": 1,
                "height": 2
              },
              "horizontalSpacing": 0,
              "verticalSpacing": 0
            },
            "data": [
              {
                "image": {
                  "url": "",
                  "method": "get",
                  "headers": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ],
                  "httpBody": null
                },
                "title": "",
                "description": "",
                "field1": "",
                "field2": "",
                "field3": "",
                "field4": "",
                "openInWebView": false,
                "isChapter": false,
                "link": {
                  "url": "empty",
                  "method": "get",
                  "headers": [
                    {
                      "key": "key",
                      "value": "value"
                    }
                  ],
                  "httpBody": null
                }
              }
            ]
          }
        ]
      }
    ],
    "info": [
      {
        "request": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": true,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ function Info ( request, extra, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Chapter ( chapName, link, openInWebView ) {\n        this.chapName = chapName;\n        this.link = link;\n        this.openInWebView = openInWebView\n}\n\nfunction Output ( image, title, link, description, genres, field1, field2, field3, field4, chapters ) {\n        this.image = image;\n        this.link = link;\n        this.title = title;\n        this.description = description;\n        this.genres = genres;\n        this.field1 = field1;\n        this.field2 = field2;\n        this.field3 = field3;\n        this.field4 = field4;\n        this.chapters = chapters\n}\n\nfunction cleanText ( str ) {\n        return str?.replace( /[\\n\\t]/g, '' ).trim( ) ?? ''\n}\n\nfunction cleanUrl ( url ) {\n        return 'https://hianime.to' + ( url.replace( '/watch', '' ).replace( '?w=latest', '' ) ).trim( )\n}\n\nfunction quickRequest ( url, clean ) {\n        if ( clean == true ) {\n                return new ModuleRequest( cleanUrl( url ), 'get', emptyKeyValue, null )\n        } else if ( clean == false || clean == null ) {\n                return new ModuleRequest( url, 'get', emptyKeyValue, null )\n        }\n}\nvar savedData = document.getElementById( 'ketsu-final-data' ) || document.body.querySelector( 'div' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nvar emptyKeyValue = [ new KeyValue( '', '' ) ];\nlet XHRequest = [ new KeyValue( 'Referer', parsedJson.request.url ), new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\nvar commands = [ new Commands( 'helperFunctions', [ new KeyValue( 'isCustomRequest', 'true' ) ] ) ];\nlet emptyExtra = new Extra( commands, emptyKeyValue );\n\nfunction grabAnimeInfo ( Header, Class ) {\n        var animeInfo = Array.from( document.querySelectorAll( 'div.anisc-info-wrap > div.anisc-info > div.item' ) );\n        var Entry = animeInfo.find( e => e.querySelector( '[class*=item-head]' )?.textContent.includes( Header ) );\n        if ( Entry.classList.contains( 'item-list' ) && Class.includes( 'a' ) ) {\n                return Array.from( Entry.querySelectorAll( 'a' ) ).map( e => e.textContent )\n        }\n        return animeInfo.find( e => e.querySelector( '[class*=item-head]' )?.textContent.includes( Header ) ).querySelector( Class ).textContent\n}\nvar Title = document.querySelector( '.anisc-detail h2' ).textContent;\nvar Image = quickRequest( document.querySelector( 'div.film-poster img' ).src );\nvar Airing = grabAnimeInfo( 'Aired', '.name' );\nvar Status = grabAnimeInfo( 'Status', '.name' );\nvar Genres = grabAnimeInfo( 'Genres', '.a' );\nvar Synopsis = document.querySelector( 'div.anis-content > div.anisc-detail > div.film-depion.m-hide > div' ).textContent.trim( );\nvar Type = document.querySelector( '[class=film-stats] > div > .dot' ).nextElementSibling.textContent;\nvar json = document.querySelector( '#wrapper' ).dataset.id;\nvar nextRequest = `https://hianime.to/ajax/v2/episode/list/${json}`;\nlet infoPageObject = new Info( new ModuleRequest( nextRequest, 'get', XHRequest, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( Image, Title, parsedJson.request, Synopsis, Genres, Status, Airing, Type, '0', [ ] ) );\nvar finalJson = JSON.stringify( infoPageObject );\nsavedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage( '' );\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": {
          "image": {
            "url": "",
            "method": "get",
            "headers": [
              {
                "key": "",
                "value": ""
              }
            ],
            "httpBody": null
          },
          "link": {
            "url": "",
            "method": "get",
            "headers": [
              {
                "key": "",
                "value": ""
              }
            ],
            "httpBody": null
          },
          "title": "",
          "description": "",
          "genres": [
            ""
          ],
          "field1": "",
          "field2": "",
          "field3": "",
          "field4": "",
          "chapters": [
            {
              "chapName": "",
              "openInWebView": false,
              "link": {
                "url": "empty",
                "method": "get",
                "headers": [
                  {
                    "key": "key",
                    "value": "value"
                  }
                ],
                "httpBody": null
              }
            }
          ]
        }
      },
      {
        "request": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": false,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ function Info(request,extra,javascriptConfig,output){this.request=request;this.extra=extra;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Chapter(chapName,link,openInWebView){this.chapName=chapName;this.link=link;this.openInWebView=openInWebView}function Output(image,title,link,description,genres,field1,field2,field3,field4,chapters){this.image=image;this.link=link;this.title=title;this.description=description;this.genres=genres;this.field1=field1;this.field2=field2;this.field3=field3;this.field4=field4;this.chapters=chapters}function cleanText(str){return str?.replace(/[\\n\\t]/g,'').trim()??''}function cleanUrl(url){return'https://hianime.to'+(url.replace('/watch','').replace('?w=latest','')).trim()}function quickRequest(url,clean){if(clean==true){return new ModuleRequest(cleanUrl(url),'get',emptyKeyValue,null)}else if(clean==false||clean==null){return new ModuleRequest(url,'get',emptyKeyValue,null)}}var savedData=document.getElementById('ketsu-final-data')||document.body.querySelector('div');var parsedJson=JSON.parse(savedData.innerText);var emptyKeyValue=[new KeyValue('','')];let Headers=[new KeyValue('Referer',parsedJson.request.url),new KeyValue('X-Requested-With','XMLHttpRequest')];var commands=[new Commands('helperFunctions',[new KeyValue('isCustomRequest','true')])];let emptyExtra=new Extra(commands,emptyKeyValue);var image=parsedJson.output.image;var title=parsedJson.output.title;var synopsis=parsedJson.output.description;var genres=parsedJson.output.genres;var type='';var format=document.querySelector('script').innerText.replace('*/','').replace('/*','');var htmldom=new DOMParser().parseFromString(JSON.parse(format).html,'text/html');var episodeList=htmldom.querySelectorAll('.ss-list a');var episodes=Array.from(episodeList).map((element,index)=>{var link='https://hianime.to/ajax/v2/episode/servers?episodeId='+element.dataset.id;var Title=element.title;if(!Title.includes('Episode')){Title=`${index+1}: `+Title}let chapter=new Chapter(Title,quickRequest(link),false);return chapter});parsedJson.request.url=parsedJson.output.link.url;parsedJson.request.headers=[new KeyValue('','')];let infoPageObject=new Info(new ModuleRequest('','',Headers,null),emptyExtra,new JavascriptConfig(false,false,''),new Output(image,title,parsedJson.request,synopsis,genres,parsedJson.output.field1,parsedJson.output.field2,type,'Eps: '+episodes.length,episodes));var finalJson=JSON.stringify(infoPageObject);savedData.innerText=finalJson;window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage(''); /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": {
          "image": {
            "url": "",
            "method": "get",
            "headers": [
              {
                "key": "",
                "value": ""
              }
            ],
            "httpBody": null
          },
          "link": {
            "url": "",
            "method": "get",
            "headers": [
              {
                "key": "",
                "value": ""
              }
            ],
            "httpBody": null
          },
          "title": "",
          "description": "",
          "genres": [
            ""
          ],
          "field1": "",
          "field2": "",
          "field3": "",
          "field4": "",
          "chapters": [
            {
              "chapName": "",
              "openInWebView": false,
              "link": {
                "url": "empty",
                "method": "get",
                "headers": [
                  {
                    "key": "key",
                    "value": "value"
                  }
                ],
                "httpBody": null
              }
            }
          ]
        }
      }
    ],
    "chapters": [
      {
        "request": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": true,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ function Chapters ( request, extra, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Output ( videos, images, text ) {\n        this.videos = videos;\n        this.images = images;\n        this.text = text\n}\n\nfunction Videos ( needsResolver, rawVideo ) {\n        this.needsResolver = needsResolver;\n        this.rawVideo = rawVideo\n}\n\nfunction NeedsResolver ( resolverIdentifier, link ) {\n        this.resolverIdentifier = resolverIdentifier;\n        this.link = link\n}\n\nfunction RawVideo ( video ) {\n        this.video = video\n}\n\nfunction Video ( videoQuality, videoLink ) {\n        this.videoQuality = videoQuality;\n        this.videoLink = videoLink\n}\nvar output = [ ];\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nvar extraInfo = [ new KeyValue( 'count', '0' ) ];\nvar XHRequest = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\nlet emptyExtra = new Extra( [ new Commands( '', XHRequest ) ], extraInfo );\nvar nextRequest = '';\nconst format = document.querySelector( 'script' ).innerHTML.replace( '/*', '' ).replace( '*/', '' );\nvar htmldom = new DOMParser( ).parseFromString( JSON.parse( format ).html, 'text/html' );\nvar links = htmldom.querySelectorAll( '.item.server-item' );\nlet Servers = Array.from( links ).map( ( link, index ) => {\n        var url = `https://hianime.to/ajax/v2/episode/sources?id=${link.dataset.id}&lang=${link.dataset.type}`;\n        if ( index == 0 ) {\n                nextRequest = url\n        } else {\n                extraInfo.push( new KeyValue( `${index}`, `${url}` ) )\n        }\n} );\nvar chaptersObject = new Chapters( new ModuleRequest( nextRequest, 'get', XHRequest, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( new Videos( [ ], [ ] ), null, null ) );\nvar finalJson = JSON.stringify( chaptersObject );\nsavedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage( '' );\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": {
          "videos": {
            "needsResolver": [
              {
                "resolverIdentifier": "",
                "link": {
                  "url": "",
                  "method": "get",
                  "headers": [
                    {
                      "key": "key",
                      "value": "value"
                    }
                  ],
                  "httpBody": null
                }
              }
            ],
            "rawVideo": [
              {
                "video": [
                  {
                    "videoQuality": "",
                    "videoLink": {
                      "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                      "method": "get",
                      "headers": [
                        {
                          "key": "key",
                          "value": "value"
                        }
                      ],
                      "httpBody": null
                    }
                  }
                ]
              }
            ]
          },
          "images": [
            {
              "url": "empty",
              "method": "get",
              "headers": [
                {
                  "key": "key",
                  "value": "value"
                }
              ],
              "httpBody": null
            }
          ],
          "text": {
            "text": ""
          }
        }
      },
      {
        "request": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": "",
              "moduleCreatorHeaderisActive": false
            }
          ]
        },
        "extra": {
          "commands": [
            {
              "commandName": "",
              "params": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            }
          ],
          "extraInfo": [
            {
              "key": "",
              "value": ""
            }
          ]
        },
        "javascriptConfig": {
          "removeJavascript": false,
          "loadInWebView": false,
          "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ function Chapters ( request, extra, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Output ( videos, images, text ) {\n        this.videos = videos;\n        this.images = images;\n        this.text = text\n}\n\nfunction Videos ( needsResolver, rawVideo ) {\n        this.needsResolver = needsResolver;\n        this.rawVideo = rawVideo\n}\n\nfunction NeedsResolver ( resolverIdentifier, link ) {\n        this.resolverIdentifier = resolverIdentifier;\n        this.link = link\n}\n\nfunction RawVideo ( video ) {\n        this.video = video\n}\n\nfunction Video ( videoQuality, videoLink ) {\n        this.videoQuality = videoQuality;\n        this.videoLink = videoLink\n}\n\nfunction cleanUrl ( url ) {\n        return 'https://hianime.to' + ( url.replace( '/watch', '' ).replace( '?w=latest', '' ) ).trim( )\n}\n\nfunction quickRequest ( url, clean ) {\n        if ( clean == true ) {\n                return new ModuleRequest( cleanUrl( url ), 'get', emptyKeyValue, null )\n        } else if ( clean == false || clean == null ) {\n                return new ModuleRequest( url, 'get', emptyKeyValue, null )\n        }\n}\n\nfunction getValueFromKey ( keys, key ) {\n        for ( var x = 0; x < keys.length; x++ ) {\n                let tKey = keys[ x ];\n                if ( tKey.key == key ) {\n                        return tKey.value\n                }\n        }\n}\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nvar output = parsedJson.output.videos;\nvar extraInfo = parsedJson.extra.extraInfo;\nvar XHRequest = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\nvar emptyHeaders = [ new KeyValue( 'Referer', 'https://hianime.to/' ) ];\nvar actualCount = getValueFromKey( extraInfo, 'count' );\nvar nextCount = parseInt( actualCount.match( /\\d+/g )[ 0 ] ) + 1;\nvar nextRequest = getValueFromKey( extraInfo, nextCount );\nif ( actualCount == 0 ) {\n        output = new Videos( [ ], [ ] )\n}\nconst format = document.querySelector( 'script' ).innerHTML.replace( '/*', '' ).replace( '*/', '' );\nvar data = JSON.parse( format );\ndata.link = data.link.replace( '?vast=1', '' );\nif ( data.link.includes( 'streamtape.com' ) ) {\n        var linked = data.link.replace( 'https://streamtape.com/', 'https://streamta.pe/' );\n        let label = parsedJson.request.url.includes( 'lang=dub' ) ? 'STREAMTA DUB' : '';\n        output.needsResolver.push( new NeedsResolver( label, new ModuleRequest( linked, 'get', emptyHeaders, null ) ) )\n} else {\n        let resolver = parsedJson.request.url.includes( 'lang=dub' ) ? data.link.split( '/' )[ 2 ].split( '.' )[ 0 ].toUpperCase( ) + ' DUB' : data.link.split( '/' )[ 2 ].split( '.' )[ 0 ].toUpperCase( );\n        output.needsResolver.push( new NeedsResolver( resolver, new ModuleRequest( data.link, 'get', emptyHeaders, null ) ) )\n}\nextraInfo[ 0 ].value = `${nextCount}`;\nif ( nextRequest == null ) {\n        nextRequest = ''\n}\nlet emptyExtra = new Extra( [ new Commands( '', XHRequest ) ], extraInfo );\nlet chaptersObject = new Chapters( new ModuleRequest( nextRequest, 'get', XHRequest, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( output, null, null ) );\nvar finalJson = JSON.stringify( chaptersObject );\nsavedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage( '' );\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
        },
        "output": {
          "videos": {
            "needsResolver": [
              {
                "resolverIdentifier": "",
                "link": {
                  "url": "",
                  "method": "get",
                  "headers": [
                    {
                      "key": "key",
                      "value": "value"
                    }
                  ],
                  "httpBody": null
                }
              }
            ],
            "rawVideo": [
              {
                "video": [
                  {
                    "videoQuality": "",
                    "videoLink": {
                      "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                      "method": "get",
                      "headers": [
                        {
                          "key": "key",
                          "value": "value"
                        }
                      ],
                      "httpBody": null
                    }
                  }
                ]
              }
            ]
          },
          "images": [
            {
              "url": "empty",
              "method": "get",
              "headers": [
                {
                  "key": "key",
                  "value": "value"
                }
              ],
              "httpBody": null
            }
          ],
          "text": {
            "text": ""
          }
        }
      }
    ],
    "moduleResolvers": [
      {
        "resolverInfo": {
          "resolverName": "STREAMTA",
          "nameMatches": [
            "STREAMTA",
            "STREAMTA DUB"
          ],
          "developer": "ナビル",
          "moduleID": "8465132120",
          "resolverVersion": 1.6,
          "baseURL": ""
        },
        "resolver": [
          {
            "request": {
              "url": "https://megacloud.club/embed-2/e-1/USKApdsKvMyz?k=1",
              "method": "get",
              "headers": [
                {
                  "key": "",
                  "value": "",
                  "moduleCreatorHeaderisActive": false
                }
              ]
            },
            "extra": {
              "commands": [
                {
                  "commandName": "",
                  "params": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ]
                }
              ],
              "extraInfo": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            },
            "javascriptConfig": {
              "removeJavascript": false,
              "loadInWebView": false,
              "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */ function Resolver ( request, extra, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Output ( video ) {\n        this.video = video\n}\n\nfunction Video ( videoQuality, videoLink ) {\n        this.videoQuality = videoQuality;\n        this.videoLink = videoLink\n}\n\nfunction getNext ( match, array ) {\n        for ( var x = 0; x < array.length; x++ ) {\n                let mMatch = array[ x ];\n                if ( mMatch.includes( match ) ) {\n                        return array[ x + 1 ]\n                }\n        }\n}\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nvar emptyKeyValue = [ new KeyValue( 'Referer', parsedJson.request.url ) ];\nvar videos = [ ];\nlet playerRegex = /innerHTML\\s=\\s*\"([^\"]+)\"\\s?\\+\\s?''\\+\\s?\\('([^']+)/;\nlet body = document.body.innerText;\nlet match = playerRegex.exec( body );\nif ( match ) {\n        let firstPart = match[ 1 ].split( '=' )[ 1 ]?.replace( '\"', '' );\n        let secondPart = match[ 2 ].substr( 4 );\n        let videoLink = `https://streamta.pe/get_video?id=${firstPart}${secondPart}&stream=1`;\n        videos.push( new Video( 'THAI GUY WAS HERE', new ModuleRequest( videoLink, 'get', emptyKeyValue, null ) ) );\n        let matchedLink = match[ 2 ];\n        let idMatch = matchedLink.match( /id=([^&]+)/ );\n        if ( idMatch ) {\n                let videoId = idMatch[ 1 ];\n                let altVideoLink = `https://streamta.pe/get_video?id=${videoId}&stream=1`;\n                videos.push( new Video( 'Normal', new ModuleRequest( altVideoLink, 'get', emptyKeyValue, null ) ) )\n        }\n        console.log( videoLink )\n}\nlet emptyExtra = new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue );\nvar chaptersObject = new Resolver( new ModuleRequest( '', '', emptyKeyValue, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( videos ) );\nvar finalJson = JSON.stringify( chaptersObject );\nsavedData.innerHTML = finalJson;\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
            },
            "output": {
              "moduleID": "",
              "video": [
                {
                  "videoQuality": "720",
                  "videoLink": {
                    "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "method": "get",
                    "headers": [
                      {
                        "key": "key",
                        "value": "value"
                      }
                    ],
                    "httpBody": null
                  }
                }
              ]
            }
          }
        ]
      },
      {
        "resolverInfo": {
          "resolverName": "VidCloud",
          "nameMatches": [
            "RAPID-CLOUD",
            "RAPID-CLOUD DUB",
            "MEGACLOUD",
            "MEGACLOUD DUB"
          ],
          "developer": "ナビル",
          "moduleID": "rapidcloud",
          "resolverVersion": 1.15,
          "baseURL": ""
        },
        "resolver": [
          {
            "request": {
              "url": "",
              "method": "get",
              "headers": [
                {
                  "key": "referer",
                  "value": "https://megacloud.club/",
                  "moduleCreatorHeaderisActive": true
                },
                {
                  "key": "",
                  "value": "",
                  "moduleCreatorHeaderisActive": true
                }
              ]
            },
            "extra": {
              "commands": [
                {
                  "commandName": "",
                  "params": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ]
                }
              ],
              "extraInfo": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            },
            "javascriptConfig": {
              "removeJavascript": false,
              "loadInWebView": true,
              "javaScript": "\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */ function Resolver ( request, extra, javascriptConfig, output ) {\n        this.request = request;\n        this.extra = extra;\n        this.javascriptConfig = javascriptConfig;\n        this.output = output\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n        this.url = url;\n        this.method = method;\n        this.headers = headers;\n        this.httpBody = httpBody\n}\n\nfunction Extra ( commands, extraInfo ) {\n        this.commands = commands;\n        this.extraInfo = extraInfo\n}\n\nfunction Commands ( commandName, params ) {\n        this.commandName = commandName;\n        this.params = params\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n        this.removeJavascript = removeJavascript;\n        this.loadInWebView = loadInWebView;\n        this.javaScript = javaScript\n}\n\nfunction KeyValue ( key, value ) {\n        this.key = key;\n        this.value = value\n}\n\nfunction Subtitles ( link, language ) {\n        this.link = link;\n        this.language = language\n}\n\nfunction Output ( video ) {\n        this.video = video\n}\n\nfunction Video ( videoQuality, videoLink ) {\n        this.videoQuality = videoQuality;\n        this.videoLink = videoLink\n}\n\nfunction getNext ( match, array ) {\n        for ( var x = 0; x < array.length; x++ ) {\n                let mMatch = array[ x ];\n                if ( mMatch.includes( match ) ) {\n                        return array[ x + 1 ]\n                }\n        }\n}\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nvar emptyHeaders = [ new KeyValue( 'Referer', parsedJson.request.url ) ];\nlet output = new Output( [ ], [ ] );\nlet retries = 10,\n        currentRetry = 0;\nwindow.failedRetriving = ( ) => {\n        clearInterval( intervalID );\n        window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage( '' )\n};\nlet intervalID = setInterval( ( ) => {\n        if ( currentRetry++ > retries ) {\n                window.failedRetriving( );\n                return\n        }\n        window.webkit.messageHandlers.KETSU_LOG.postMessage( window.jwplayer );\n        let item = jwplayer( ).getPlaylist( )?.[ 0 ];\n        if ( !item || item.length === 0 ) return;\n        output.subs = item.tracks.filter( track => track.kind === 'captions' ).map( caption => new Subtitles( new ModuleRequest( caption.file, 'GET', [ ], undefined ), caption.label ) );\n        output.video = item.allSources.map( source => new Video( source.type, new ModuleRequest( source.file, 'GET', [ ], undefined ) ) );\n        let emptyExtra = new Extra( [ new Commands( '', emptyHeaders ) ], emptyHeaders );\n        let chaptersObject = new Resolver( new ModuleRequest( '', '', emptyHeaders, null ), emptyExtra, new JavascriptConfig( false, false, '' ), output );\n        savedData.innerHTML = JSON.stringify( chaptersObject );\n        clearInterval( intervalID );\n        window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage( '' )\n}, 1e3 );\n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
            },
            "output": {
              "moduleID": "",
              "video": [
                {
                  "videoQuality": "",
                  "videoLink": {
                    "url": "",
                    "method": "get",
                    "headers": [
                      {
                        "key": "key",
                        "value": "value"
                      }
                    ],
                    "httpBody": null
                  }
                }
              ]
            },
            "moduleCreatorIdjaOhXhAZEBdOGAiotXzW": {
              "path": "xAJlT",
              "id": "moduleResolvers,1,resolver,0cell",
              "sectionsHidden": [],
              "options": {
                "name": "Request"
              },
              "cellsHidden": false,
              "openedMenu": "Javascript",
              "javascriptEditorScroll": 84,
              "async": true
            }
          }
        ]
      }
    ],
    "responseCodeFunctions": [
      {
        "code": 0,
        "msgTitle": "",
        "msgBody": "",
        "type": "normal",
        "functions": [
          {
            "request": {
              "url": "empty",
              "method": "get",
              "headers": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            },
            "extra": {
              "commands": [
                {
                  "commandName": "",
                  "params": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ]
                }
              ],
              "extraInfo": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            },
            "javascriptConfig": {
              "removeJavascript": true,
              "loadInWebView": false,
              "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */     \n     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
            }
          }
        ]
      }
    ],
    "helperFunctions": [
      {
        "functionName": "example",
        "msgTitle": "",
        "msgBody": "",
        "type": "normal",
        "functions": [
          {
            "request": {
              "url": "empty",
              "method": "get",
              "headers": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            },
            "extra": {
              "commands": [
                {
                  "commandName": "",
                  "params": [
                    {
                      "key": "",
                      "value": ""
                    }
                  ]
                }
              ],
              "extraInfo": [
                {
                  "key": "",
                  "value": ""
                }
              ]
            },
            "javascriptConfig": {
              "removeJavascript": true,
              "loadInWebView": false,
              "javaScript": "\n        try {\n\n            /* JAVASCRIPT STARTS */     \n     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "
            }
          }
        ]
      }
    ]
  }