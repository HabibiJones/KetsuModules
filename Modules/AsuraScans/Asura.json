{
  "moduleInfo": {
    "moduleName": "AsuraScans",
    "moduleInitials": "AS",
    "moduleDesc": "Asurascans to reign amongst all else",
    "developer": "Scrumptious",
    "moduleID": "20020901",
    "moduleImage": "https://i.postimg.cc/MK0y10tY/asura-logo.png",
    "moduleVersion": 2.17,
    "moduleLenguage": "ENG",
    "changelog":"Improved mainpage and chapter logic",
    "moduleType": "Image",
    "baseURL": "https://asuracomic.net/",
    "moduleDeveloperSite": "https://github.com/OffsetParts/KetsuModules/",
    "UpdateSite": "https://raw.githubusercontent.com/OffsetParts/KetsuModules/master/Modules/AsuraScans/Asura.json",
    "preferedServer": "",
    "preferedDownloadServer": "",
    "blackListed": [
      ""
    ]
  },
  "global": {
    "variables": [
      {
        "key": "",
        "value": ""
      }
    ],
    "cookies": [
      {
        "key": "",
        "value": ""
      }
    ],
    "headers": [
      {
        "key": "",
        "value": ""
      }
    ]
  },
  "mainPage": [
    {
      "request": {
        "url": "https://asuracomic.net/",
        "method": "get",
        "headers": [
          {
            "key": "",
            "value": ""
          }
        ],
        "httpBody": null
      },
      "extra": {
        "commands": [
          {
            "commandName": "",
            "params": [
              {
                "key": "",
                "value": ""
              }
            ]
          }
        ],
        "extraInfo": [
          {
            "key": "",
            "value": ""
          }
        ]
      },
      "javascriptConfig": {
        "removeJavascript": false,
        "loadInWebView": true,
        "javaScript": "const DefaultLayouts={ultraWideFull:'ultraWideFull',ultraWide:'ultraWide',wideFull:'wideFull',wide:'wide',wideStrechedFull:'wideStrechedFull',wideStrechedFullDouble:'WideStrechedFullDouble',wideStreched:'wideStreched',wideStrechedDouble:'wideStrechedDouble',wideStrechedFullList:'wideStrechedFullList',wideStrechedList:'wideStrechedList',doublets:'doublets',doubletsDouble:'doubletsDouble',doubletsFull:'doubletsFull',doubletsFullDouble:'doubletsFullDouble',doubletsConstant:'doubletsConstant',doubletsDoubleConstant:'doubletsDoubleConstant',doubletsFullConstant:'doubletsFullConstant',doubletsFullDoubleConstant:'doubletsFullDoubleConstant',longDoublets:'longDoublets',longDoubletsDouble:'longDoubletsDouble',longDoubletsFull:'longDoubletsFull',longDoubletsFullDouble:'longDoubletsFullDouble',longDoubletsConstant:'longDoubletsConstant',longDoubletsDoubleConstant:'longDoubletsDoubleConstant',longDoubletsFullConstant:'longDoubletsFullConstant',longDoubletsFullDoubleConstant:'longDoubletsFullDoubleConstant',triplets:'triplets',tripletsDouble:'tripletsDouble',tripletsFull:'tripletsFull',tripletsFullDouble:'tripletsFullDouble',tripletsConstant:'tripletsConstant',tripletsDoubleConstant:'tripletsDoubleConstant',tripletsFullConstant:'tripletsFullConstant',tripletsFullDoubleConstant:'tripletsFullDoubleConstant',longTriplets:'longTriplets',longTripletsDouble:'longTripletsDouble',longTripletsFull:'longTripletsFull',longTripletsFullDouble:'longTripletsFullDouble',longTripletsConstant:'longTripletsConstant',longTripletsDoubleConstant:'longTripletsDoubleConstant',longTripletsFullConstant:'longTripletsFullConstant',longTripletsFullDoubleConstant:'longTripletsFullDoubleConstant',none:''};const CellDesings={Special1:'Special1',Special2:'Special2',Special3:'Special3',CELLHelperText:'CELLHelperText',small1:'small1',small2:'small2',normal1:'normal1',normal2:'normal2',normal3:'normal3',normal4:'normal4',normal5:'normal5',normal6:'normal6',normal7:'normal7',wide1:'wide1',wide2:'wide2',wide3:'wide3',wide4:'wide4',wide5:'wide5',wide6:'wide6',wide7:'wide7',wide8:'wide8',wide9:'wide9',wide10:'wide10',wide11:'wide11'};const Paging={leading:'leading',centered:'centered',none:''};const Orientation={horizontal:'horizontal',vertical:'vertical'};const RatioRelation={width:'width',height:'height'};function Insets(top,bottom,left,right){this.top=top;this.bottom=bottom;this.left=left;this.right=right}function Size(width,height){this.width=width;this.height=height}function Ratio(inRelation,number1,number2){this.inRelation=inRelation;this.number1=number1;this.number2=number2}function Layout(insets,visibleCellsWidthS,visibleCellsWidthM,visibleCellsWidthL,visibleCellsHeight,heightForVisibleCells,cellSize,ratio,constant,horizontalSpacing,verticalSpacing){this.insets=insets;this.visibleCellsWidthS=visibleCellsWidthS;this.visibleCellsWidthM=visibleCellsWidthM;this.visibleCellsWidthL=visibleCellsWidthL;this.visibleCellsHeight=visibleCellsHeight;this.heightForVisibleCells=heightForVisibleCells;this.cellSize=cellSize;this.ratio=ratio;this.constant=constant;this.horizontalSpacing=horizontalSpacing;this.verticalSpacing=verticalSpacing}function MainPage(request,extra,javascriptConfig,output){this.request=request;this.extra=extra;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Output(cellDesing,orientation,defaultLayout,paging,section,layout,data){this.cellDesing=cellDesing;this.orientation=orientation;this.defaultLayout=defaultLayout;this.paging=paging;this.section=section;this.layout=layout;this.data=data}function Section(sectionName,separator){this.sectionName=sectionName;this.separator=separator}function Data(image,title,description,field1,field2,field3,field4,isChapter,link,openInWebView){this.image=image;this.title=title;this.description=description;this.field1=field1;this.field2=field2;this.field3=field3;this.field4=field4;this.isChapter=isChapter;this.link=link;this.openInWebView=openInWebView}let Poster=new Layout(new Insets(5,5,10,10),1,2,3,1,375,new Size(413,650),new Ratio(RatioRelation.height,216,340),new Size(0,0),15,15);let output=[];var savedData=document.getElementById('ketsu-final-data');var parsedJson=JSON.parse(savedData.innerHTML);var emptyKeyValue=[new KeyValue('','')];var commands=[new Commands('helperFunctions',[new KeyValue('isCustomRequest','true')])];let emptyExtra=new Extra(commands,emptyKeyValue);function cleanUrl(url){return'https://asuracomic.net/'+(url).trim()}function cleanText(str){return str.replace(/[\\n\\t]/g,'').trim()}function quickRequest(url,clean){if(clean==true){return new ModuleRequest(cleanUrl(url),'get',emptyKeyValue,null)}else if(clean==false||clean==null){return new ModuleRequest(cleanText(url),'get',emptyKeyValue,null)}}function scriptFilter(innerRegex){let refinedData='';let outerFunctionRegex=/self\\.__next_f\\.push\\(\\[(\\d+),\\s*\"(.*?)\"\\]\\)/u;document.querySelectorAll('script').forEach((element)=>{let content=element.innerHTML;if(content.includes(innerRegex)){let match=content.match(outerFunctionRegex);if(match){refinedData=JSON.parse(match[2].replace(/[a-zA-Z0-9]+:/g,'').replace(/\\\\r\\\\n/g,'\\n').replace(/\\\\\"/g,'\"').replace(/\\\\\\\\/g,'\\\\').replace(/\\\\n$/,''))}}});return refinedData}function dynamicCiteriaSearch(obj,criteria){let results=[];function recursiveSearch(obj){if(Array.isArray(obj)){obj.forEach(item=>{if(typeof item==='object'&&item!==null){let matches=Object.keys(criteria).every(key=>{const expectedType=criteria[key].type;const valueType=typeof item[key];if(expectedType&&valueType===expectedType){const expectedValue=criteria[key].value;if(expectedValue!==undefined){if(valueType==='string'&&expectedValue instanceof RegExp){return expectedValue.test(item[key])}else if(valueType==='number'&&typeof expectedValue==='function'){return expectedValue(item[key])}else{return item[key]===expectedValue}}return true}return false});if(matches){results.push(item)}}})}if(typeof obj==='object'&&obj!==null){for(let key in obj){recursiveSearch(obj[key])}}}recursiveSearch(obj);return results}function findProperties(obj,keysToFind){let results=[];function recursiveSearch(obj){if(typeof obj==='object'&&obj!==null){let foundKeys=keysToFind.every(key=>key in obj);if(foundKeys){results.push(obj)}for(let key in obj){recursiveSearch(obj[key])}}}recursiveSearch(obj);return results}let goatCriteria={'value':{type:'string',value:'all'}};let GOAT=[];let goatData=dynamicCiteriaSearch(scriptFilter('{\\\\\"value\\\\\":\\\\\"all\\\\\"'),goatCriteria);if(goatData){GOAT=Array.from(goatData[0]['children']).map(list=>{const info=findProperties(list,['href','children'])[1];let title=info.children;let url=quickRequest(info.href,true);let image=quickRequest('https:'+findProperties(list,['src'])[0].src);return new Data(image,title,'0','','','3','4',false,url)});output.push(new Output(CellDesings.normal1,Orientation.horizontal,DefaultLayouts.none,Paging.leading,new Section('',false),Poster,GOAT))}let monthlyCriteria={'value':{type:'string',value:'monthly'}};let MonthlyList=[];scriptFilter('{\\\\\"value\\\\\":\\\\\"monthly\\\\\"');let monthlyData=dynamicCiteriaSearch(scriptFilter('{\\\\\"value\\\\\":\\\\\"monthly\\\\\"'),monthlyCriteria);if(monthlyData){MonthlyList=Array.from(monthlyData[0]['children']).map(list=>{const info=findProperties(list,['href','children'])[1];let title=info.children;let url=quickRequest(info.href,true);let image=quickRequest('https:'+findProperties(list,['src'])[0].src);return new Data(image,title,'0','1','2','3','4',false,url)});output.push(new Output(CellDesings.normal4,Orientation.horizontal,DefaultLayouts.longDoubletsFull,Paging.leading,new Section('Monthly',false),null,MonthlyList))}const weeklyElm=document.querySelectorAll('[id*=\"weekly\"] > div');let WeeklyList=Array.from(weeklyElm).map(list=>{let title=cleanText(list.querySelector('span a').textContent);var link=quickRequest(list.querySelector('span a').href);var image=quickRequest(list.querySelector('img').src);return new Data(image,title,'0','1','2','3','4',false,link)});const FeaturedElms=document.querySelectorAll('.slide');let=Featured=Array.from(FeaturedElms).map(list=>{let title=cleanText(list.querySelector('a').textContent);var link=quickRequest(list.querySelector('a').href);var image=quickRequest(list.querySelector('img').src);return new Data(image,title,'0','','','3','4',false,link)});const popularElm=document.querySelectorAll('div.hidden > [class*=\"p-1.5\"]');let Popular=Array.from(popularElm).map(list=>{let title=cleanText(list.querySelector('span.block').textContent);var link=quickRequest(list.querySelector('a').href);var image=quickRequest(list.querySelector('img').src);return new Data(image,title,'1','2','3','4','5',false,link)});const latestElms=document.querySelectorAll('[class*=\"w-full p-1\"]');let Latests=Array.from(latestElms).map(list=>{let title=cleanText(list.querySelector('span').textContent);var link=quickRequest(list.querySelector('a').href);var image=quickRequest(list.querySelector('img').src);var ep=cleanText(list.querySelector('a span').textContent);return new Data(image,title,ep,'','1','2','3',false,link)});output.push(new Output(CellDesings.normal4,Orientation.horizontal,DefaultLayouts.longTripletsDouble,Paging.leading,new Section('Weekly',false),null,WeeklyList));output.push(new Output(CellDesings.normal1,Orientation.horizontal,DefaultLayouts.none,Paging.leading,new Section('Featured',false),Poster,Featured));output.push(new Output(CellDesings.normal4,Orientation.horizontal,DefaultLayouts.longTriplets,Paging.leading,new Section('Popular Today',true),null,Popular));output.push(new Output(CellDesings.wide9,Orientation.horizontal,DefaultLayouts.wideStrechedList,Paging.leading,new Section('Latest Chapters',true),null,Latests));let MainPageObject=new MainPage(new ModuleRequest('','get',emptyKeyValue,null),emptyExtra,new JavascriptConfig(false,true,''),output);var finalJson=JSON.stringify(MainPageObject);savedData.innerHTML=finalJson;window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');"
      },
      "output": [
        {
          "cellDesing": "normal1",
          "orientation": "vertical",
          "defaultLayout": "wide",
          "paging": "",
          "section": {
            "sectionName": "",
            "separator": false
          },
          "layout": {
            "insets": {
              "top": 0,
              "bottom": 0,
              "left": 0,
              "right": 0
            },
            "visibleCellsWidthS": 2,
            "visibleCellsWidthM": 2,
            "visibleCellsWidthL": 2,
            "visibleCellsHeight": 2,
            "heightForVisibleCells": 400,
            "cellSize": {
              "width": 300,
              "height": 300
            },
            "ratio": {
              "inRelation": "width",
              "number1": 1,
              "number2": 2
            },
            "constant": {
              "width": 1,
              "height": 2
            },
            "horizontalSpacing": 0,
            "verticalSpacing": 0
          },
          "data": [
            {
              "image": {
                "url": "",
                "method": "get",
                "headers": [
                  {
                    "key": "",
                    "value": ""
                  }
                ],
                "httpBody": null
              },
              "title": "",
              "description": "",
              "field1": "",
              "field2": "",
              "field3": "",
              "field4": "",
              "openInWebView" : false,
              "isChapter": false,
              "link": {
                "url": "",
                "method": "",
                "headers": [
                  {
                    "key": "",
                    "value": ""
                  }
                ],
                "httpBody": null
              }
            }
          ]
        }
      ]
    }
  ],
  "search": [
    {
      "request": {
        "url": "https://asuracomic.net/series?page=<page>&name=<searched>",
        "method": "get",
        "headers": [
          {
            "key": "",
            "value": ""
          }
        ],
        "httpBody": null
      },
      "separator": " ",
      "extra": {
        "commands": [
          {
            "commandName": "",
            "params": [
              {
                "key": "",
                "value": ""
              }
            ]
          }
        ],
        "extraInfo": [
          {
            "key": "",
            "value": ""
          }
        ]
      },
      "javascriptConfig": {
        "removeJavascript": true,
        "loadInWebView": false,
        "javaScript": "const DefaultLayouts={ultraWideFull:'ultraWideFull',ultraWide:'ultraWide',wideFull:'wideFull',wide:'wide',wideStrechedFull:'wideStrechedFull',wideStrechedFullDouble:'WideStrechedFullDouble',wideStreched:'wideStreched',wideStrechedDouble:'wideStrechedDouble',wideStrechedFullList:'wideStrechedFullList',wideStrechedList:'wideStrechedList',doublets:'doublets',doubletsDouble:'doubletsDouble',doubletsFull:'doubletsFull',doubletsFullDouble:'doubletsFullDouble',doubletsConstant:'doubletsConstant',doubletsDoubleConstant:'doubletsDoubleConstant',doubletsFullConstant:'doubletsFullConstant',doubletsFullDoubleConstant:'doubletsFullDoubleConstant',longDoublets:'longDoublets',longDoubletsDouble:'longDoubletsDouble',longDoubletsFull:'longDoubletsFull',longDoubletsFullDouble:'longDoubletsFullDouble',longDoubletsConstant:'longDoubletsConstant',longDoubletsDoubleConstant:'longDoubletsDoubleConstant',longDoubletsFullConstant:'longDoubletsFullConstant',longDoubletsFullDoubleConstant:'longDoubletsFullDoubleConstant',triplets:'triplets',tripletsDouble:'tripletsDouble',tripletsFull:'tripletsFull',tripletsFullDouble:'tripletsFullDouble',tripletsConstant:'tripletsConstant',tripletsDoubleConstant:'tripletsDoubleConstant',tripletsFullConstant:'tripletsFullConstant',tripletsFullDoubleConstant:'tripletsFullDoubleConstant',longTriplets:'longTriplets',longTripletsDouble:'longTripletsDouble',longTripletsFull:'longTripletsFull',longTripletsFullDouble:'longTripletsFullDouble',longTripletsConstant:'longTripletsConstant',longTripletsDoubleConstant:'longTripletsDoubleConstant',longTripletsFullConstant:'longTripletsFullConstant',longTripletsFullDoubleConstant:'longTripletsFullDoubleConstant',none:''};const CellDesings={Special1:'Special1',Special2:'Special2',Special3:'Special3',CELLHelperText:'CELLHelperText',small1:'small1',small2:'small2',normal1:'normal1',normal2:'normal2',normal3:'normal3',normal4:'normal4',normal5:'normal5',normal6:'normal6',normal7:'normal7',wide1:'wide1',wide2:'wide2',wide3:'wide3',wide4:'wide4',wide5:'wide5',wide6:'wide6',wide7:'wide7',wide8:'wide8',wide9:'wide9',wide10:'wide10',wide11:'wide11'};const Paging={leading:'leading',centered:'centered',none:''};const Orientation={horizontal:'horizontal',vertical:'vertical'};function Search(request,extra,separator,javascriptConfig,output){this.request=request;this.extra=extra;this.separator=separator;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Output(cellDesing,orientation,defaultLayout,paging,section,layout,data){this.cellDesing=cellDesing;this.orientation=orientation;this.defaultLayout=defaultLayout;this.paging=paging;this.section=section;this.layout=layout;this.data=data}function Section(sectionName,separator){this.sectionName=sectionName;this.separator=separator}function Layout(insets,visibleCellsWidthS,visibleCellsWidthM,visibleCellsWidthL,visibleCellsHeight,heightForVisibleCells,cellSize,ratio,constant,horizontalSpacing,verticalSpacing){this.insets=insets;this.visibleCellsWidthS=visibleCellsWidthS;this.visibleCellsWidthM=visibleCellsWidthM;this.visibleCellsWidthL=visibleCellsWidthL;this.visibleCellsHeight=visibleCellsHeight;this.heightForVisibleCells=heightForVisibleCells;this.cellSize=cellSize;this.ratio=ratio;this.constant=constant;this.horizontalSpacing=horizontalSpacing;this.verticalSpacing=verticalSpacing}function Insets(top,bottom,left,right){this.top=top;this.bottom=bottom;this.left=left;this.right=right}function Size(width,height){this.width=width;this.height=height}function Ratio(inRelation,number1,number2){this.inRelation=inRelation;this.number1=number1;this.number2=number2}function Data(image,title,description,field1,field2,field3,field4,isChapter,link,openInWebView){this.image=image;this.title=title;this.description=description;this.field1=field1;this.field2=field2;this.field3=field3;this.field4=field4;this.isChapter=isChapter;this.link=link;this.openInWebView=openInWebView}function cleanUrl(url){return'https://asuracomic.net/'+(url).trim()}function cleanText(str){return str.replace(/[\\n\\t]/g,'').trim()}function quickRequest(url,clean){if(clean==true){return new ModuleRequest(cleanUrl(url),'get',emptyKeyValue,null)}else if(clean==false||clean==null){return new ModuleRequest(url,'get',emptyKeyValue,null)}}let output=[];var savedData=document.getElementById('ketsu-final-data');var parsedJson=JSON.parse(savedData.innerHTML);let emptyKeyValue=[new KeyValue('','')];const lastAdded=document.querySelectorAll('[class*=\"gap-3 p-4\"] a');const lastAddedArray=Array.from(lastAdded).map(list=>{const title=list.querySelector('span[class*=\"block\"]').textContent;const link=quickRequest(list.href,true);const image=quickRequest(list.querySelector('img').src);const lastChapter=cleanText(list.querySelector('[class*=\"text-[13px]\"]').textContent);return new Data(image,title,lastChapter,'','','','',false,link)});var testLayout=new Layout(new Insets(10,10,10,10),1,2,3,1,500,new Size(400,400),new Ratio('width',4,11),new Size(0,0),10,10);output.push(new Output(CellDesings.wide8,Orientation.vertical,DefaultLayouts.none,Paging.none,new Section('',false),testLayout,lastAddedArray));let searchPageObject=new Search(new ModuleRequest('','',emptyKeyValue,null),new Extra([new Commands('',emptyKeyValue)],emptyKeyValue),'',new JavascriptConfig(false,false,''),output);var finalJson=JSON.stringify(searchPageObject);savedData.innerHTML=finalJson;"
      },
      "output": [
        {
          "cellDesing": "normal1",
          "orientation": "vertical",
          "defaultLayout": "wide",
          "paging": "",
          "section": {
            "sectionName": "",
            "separator": false
          },
          "layout": {
            "insets": {
              "top": 0,
              "bottom": 0,
              "left": 0,
              "right": 0
            },
            "visibleCellsWidthS": 2,
            "visibleCellsWidthM": 2,
            "visibleCellsWidthL": 2,
            "visibleCellsHeight": 2,
            "heightForVisibleCells": 400,
            "cellSize": {
              "width": 300,
              "height": 300
            },
            "ratio": {
              "inRelation": "width",
              "number1": 1,
              "number2": 2
            },
            "constant": {
              "width": 1,
              "height": 2
            },
            "horizontalSpacing": 0,
            "verticalSpacing": 0
          },
          "data": [
            {
              "image": {
                "url": "",
                "method": "get",
                "headers": [
                  {
                    "key": "",
                    "value": ""
                  }
                ],
                "httpBody": null
              },
              "title": "",
              "description": "",
              "field1": "",
              "field2": "",
              "field3": "",
              "field4": "",
              "openInWebView" : false,
              "isChapter": false,
              "link": {
                "url": "empty",
                "method": "get",
                "headers": [
                  {
                    "key": "key",
                    "value": "value"
                  }
                ],
                "httpBody": null
              }
            }
          ]
        }
      ]
    }
  ],
  "info": [
    {
      "request": {
        "url": "",
        "method": "get",
        "headers": [
          {
            "key": "",
            "value": ""
          }
        ],
        "httpBody": null
      },
      "extra": {
        "commands": [
          {
            "commandName": "",
            "params": [
              {
                "key": "",
                "value": ""
              }
            ]
          }
        ],
        "extraInfo": [
          {
            "key": "",
            "value": ""
          }
        ]
      },
      "javascriptConfig": {
        "removeJavascript": false,
        "loadInWebView": false,
        "javaScript": "function Info(request,extra,javascriptConfig,output){this.request=request;this.extra=extra;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Chapter(chapName,link,openInWebView){this.chapName=chapName;this.link=link;this.openInWebView=openInWebView}function Output(image,title,link,description,genres,field1,field2,field3,field4,chapters){this.image=image;this.link=link;this.title=title;this.description=description;this.genres=genres;this.field1=field1;this.field2=field2;this.field3=field3;this.field4=field4;this.chapters=chapters}function cleanUrl(url){return'https://asuracomic.net/series/'+(url).trim()}function cleanText(text){return text.replace(/\\s+|&nbsp;/g,' ').replace(/[\"']/g,'\\$&')}function quickRequest(url,clean){if(clean==true){return new ModuleRequest(cleanUrl(url),'get',emptyKeyValue,null)}else if(clean==false||clean==null){return new ModuleRequest(url,'get',emptyKeyValue,null)}}function getText(node,accumulator=[]){if(node.nodeType===Node.TEXT_NODE){accumulator.push(node.textContent)}else if(node.nodeType===Node.ELEMENT_NODE&&node.tagName.toLowerCase()!=='script'){for(let child of node.childNodes){getText(child,accumulator)}}return cleanText(accumulator.join(' ')).trim()}var savedData=document.getElementById('ketsu-final-data');var parsedJson=JSON.parse(savedData.innerHTML);let emptyKeyValue=[new KeyValue('','')];var genres=Array.from(document.querySelectorAll('[class*=\"flex flex-row flex-wrap gap-3\"] > button')).map(g=>g.textContent);var state=document.querySelector('h3[class*=\"capitalize\"]').textContent;var type=document.querySelector('h3[class*=\"text-white hover:text-themecolor\"]').textContent;var synopsis=getText(document.querySelector('span[class*=\"A2A2A2\"]'));var title=cleanText(document.querySelector('[class*=\"text-xl\"]').textContent);var image=quickRequest(document.querySelector('[alt=\"poster\"]').src);var chapterElms=document.querySelectorAll('div[class*=\"border-[#A2A2A2]/20\"]');var chapters=Array.from(chapterElms).map((element,index)=>{var link=element.querySelector('a').href;let chapter=new Chapter('Chapter '+(chapterElms.length-index),quickRequest(link,true),false);return chapter}).reverse();let infoPageObject=new Info(new ModuleRequest('','',emptyKeyValue,null),new Extra([new Commands('',emptyKeyValue)],emptyKeyValue),new JavascriptConfig(false,false,''),new Output(image,title,parsedJson.request,synopsis,genres,state,type,'','Chapters : '+chapters.length,chapters));var finalJson=JSON.stringify(infoPageObject);savedData.innerHTML=finalJson;"
      },
      "output": {
        "image": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": ""
            }
          ],
          "httpBody": null
        },
        "link": {
          "url": "",
          "method": "get",
          "headers": [
            {
              "key": "",
              "value": ""
            }
          ],
          "httpBody": null
        },
        "title": "",
        "description": "",
        "genres": [
          ""
        ],
        "field1": "",
        "field2": "",
        "field3": "",
        "field4": "",
        "chapters": [
          {
            "chapName": "",
            "openInWebView": false,
            "link": {
              "url": "empty",
              "method": "get",
              "headers": [
                {
                  "key": "key",
                  "value": "value"
                }
              ],
              "httpBody": null
            }
          }
        ]
      }
    }
  ],
  "chapters": [
    {
      "request": {
        "url": "",
        "method": "get",
        "headers": [
          {
            "key": "",
            "value": ""
          }
        ],
        "httpBody": null
      },
      "extra": {
        "commands": [
          {
            "commandName": "",
            "params": [
              {
                "key": "",
                "value": ""
              }
            ]
          }
        ],
        "extraInfo": [
          {
            "key": "",
            "value": ""
          }
        ]
      },
      "javascriptConfig": {
        "removeJavascript": false,
        "loadInWebView": true,
        "javaScript": "function Chapters(request,extra,javascriptConfig,output){this.request=request;this.extra=extra;this.javascriptConfig=javascriptConfig;this.output=output}function ModuleRequest(url,method,headers,httpBody){this.url=url;this.method=method;this.headers=headers;this.httpBody=httpBody}function Extra(commands,extraInfo){this.commands=commands;this.extraInfo=extraInfo}function Commands(commandName,params){this.commandName=commandName;this.params=params}function JavascriptConfig(removeJavascript,loadInWebView,javaScript){this.removeJavascript=removeJavascript;this.loadInWebView=loadInWebView;this.javaScript=javaScript}function KeyValue(key,value){this.key=key;this.value=value}function Package(images){this.images=images}var id='ketsu-final-data';let ketsu=document.createElement('div');ketsu.setAttribute('id',id);var emptyKeyValue=[new KeyValue('','')];let emptyExtra=new Extra([new Commands('',emptyKeyValue)],emptyKeyValue);const sleep=(delay)=>new Promise((resolve)=>setTimeout(resolve,delay));function cleanUrl(url){return(url).trim()}function quickRequest(url){return new ModuleRequest(cleanUrl(url),'GET',emptyKeyValue,null)}let deploySource=()=>(Array.from(document.querySelectorAll('[alt*=\"chapter page\"]')).map((img)=>(quickRequest(img.src))));let finish=(images)=>{var chaptersObject=new Chapters(new ModuleRequest('','',emptyKeyValue,null),emptyExtra,new JavascriptConfig(false,false,''),new Package(images));var finalJson=JSON.stringify(chaptersObject);document.body.querySelectorAll('#'+id).forEach((el)=>(el.remove()));document.body.prepend(ketsu);ketsu.innerHTML=finalJson;window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('')}let tries=0;let maxTries=navigator.connection?Math.ceil(navigator.connection.downlink*5):10;const observer=new MutationObserver((mutations,obs)=>{let images=deploySource();if(images.length>0){finish(images);obs.disconnect()}tries++;if(tries>maxTries){finish([]);obs.disconnect()}});observer.observe(document.body,{childList:true,subtree:true});if(deploySource().length>0){observer.disconnect();finish(deploySource())}"
      },
      "output": {
        "videos": {
          "needsResolver": [
            {
              "resolverIdentifier": "",
              "link": {
                "url": "",
                "method": "get",
                "headers": [
                  {
                    "key": "key",
                    "value": "value"
                  }
                ],
                "httpBody": null
              }
            }
          ],
          "rawVideo": [
            {
              "video": [
                {
                  "videoQuality": "",
                  "videoLink": {
                    "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "method": "get",
                    "headers": [
                      {
                        "key": "key",
                        "value": "value"
                      }
                    ],
                    "httpBody": null
                  }
                }
              ]
            }
          ]
        },
        "images": [
          {
            "url": "empty",
            "method": "get",
            "headers": [
              {
                "key": "key",
                "value": "value"
              }
            ],
            "httpBody": null
          }
        ],
        "text": {
          "text": ""
        }
      }
    }
  ],
  "moduleResolvers": [
    {
      "resolverInfo": {
        "resolverName": "",
        "nameMatches": [
          ""
        ],
        "developer": "",
        "moduleID": "",
        "resolverVersion": 1,
        "baseURL": ""
      },
      "resolver": [
        {
          "request": {
            "url": "",
            "method": "get",
            "headers": [
              {
                "key": "key",
                "value": "value"
              }
            ],
            "httpBody": null
          },
          "extra": {
            "commands": [
              {
                "commandName": "",
                "params": [
                  {
                    "key": "",
                    "value": ""
                  }
                ]
              }
            ],
            "extraInfo": [
              {
                "key": "",
                "value": ""
              }
            ]
          },
          "javascriptConfig": {
            "removeJavascript": false,
            "loadInWebView": false,
            "javaScript": ""
          },
          "output": {
            "moduleID": "",
            "video": [
              {
                "videoQuality": "720",
                "videoLink": {
                  "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                  "method": "get",
                  "headers": [
                    {
                      "key": "key",
                      "value": "value"
                    }
                  ],
                  "httpBody": null
                }
              }
            ]
          }
        }
      ]
    }
  ],
  "responseCodeFunctions": [
    {
      "code": 0,
      "msgTitle": "",
      "msgBody": "",
      "type": "normal",
      "functions": [
        {
          "request": {
            "url": "empty",
            "method": "get",
            "headers": [
              {
                "key": "key",
                "value": "value"
              }
            ],
            "httpBody": null
          },
          "extra": {
            "commands": [
              {
                "commandName": "",
                "params": [
                  {
                    "key": "",
                    "value": ""
                  }
                ]
              }
            ],
            "extraInfo": [
              {
                "key": "",
                "value": ""
              }
            ]
          },
          "javascriptConfig": {
            "removeJavascript": true,
            "loadInWebView": false,
            "javaScript": ""
          }
        }
      ]
    }
  ],
  "helperFunctions": [
    {
      "functionName": "example",
      "msgTitle": "RECAPTCHA",
      "msgBody": "Validate the recaptcha and when you finished click on Done",
      "type": "captcha",
      "functions": [
        {
          "request": {
            "url": "empty",
            "method": "get",
            "headers": [
              {
                "key": "key",
                "value": "value"
              }
            ],
            "httpBody": null
          },
          "extra": {
            "commands": [
              {
                "commandName": "",
                "params": [
                  {
                    "key": "",
                    "value": ""
                  }
                ]
              }
            ],
            "extraInfo": [
              {
                "key": "",
                "value": ""
              }
            ]
          },
          "javascriptConfig": {
            "removeJavascript": false,
            "loadInWebView": true,
            "javaScript": "const DefaultLayouts = { ultraWideFull: 'ultraWideFull', ultraWide: 'ultraWide', wideFull: 'wideFull', wide: 'wide', wideStrechedFull: 'wideStrechedFull', wideStrechedFullDouble: 'WideStrechedFullDouble', wideStreched: 'wideStreched', wideStrechedDouble: 'wideStrechedDouble', wideStrechedFullList: 'wideStrechedFullList', wideStrechedList: 'wideStrechedList', doublets: 'doublets', doubletsDouble: 'doubletsDouble', doubletsFull: 'doubletsFull', doubletsFullDouble: 'doubletsFullDouble', doubletsConstant: 'doubletsConstant', doubletsDoubleConstant: 'doubletsDoubleConstant', doubletsFullConstant: 'doubletsFullConstant', doubletsFullDoubleConstant: 'doubletsFullDoubleConstant', longDoublets: 'longDoublets', longDoubletsDouble: 'longDoubletsDouble', longDoubletsFull: 'longDoubletsFull', longDoubletsFullDouble: 'longDoubletsFullDouble', longDoubletsConstant: 'longDoubletsConstant', longDoubletsDoubleConstant: 'longDoubletsDoubleConstant', longDoubletsFullConstant: 'longDoubletsFullConstant', longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant', triplets: 'triplets', tripletsDouble: 'tripletsDouble', tripletsFull: 'tripletsFull', tripletsFullDouble: 'tripletsFullDouble', tripletsConstant: 'tripletsConstant', tripletsDoubleConstant: 'tripletsDoubleConstant', tripletsFullConstant: 'tripletsFullConstant', tripletsFullDoubleConstant: 'tripletsFullDoubleConstant', longTriplets: 'longTriplets', longTripletsDouble: 'longTripletsDouble', longTripletsFull: 'longTripletsFull', longTripletsFullDouble: 'longTripletsFullDouble', longTripletsConstant: 'longTripletsConstant', longTripletsDoubleConstant: 'longTripletsDoubleConstant', longTripletsFullConstant: 'longTripletsFullConstant', longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant', none: ''};const CellDesings = { Special1: 'Special1', Special2: 'Special2', Special3: 'Special3', CELLHelperText: 'CELLHelperText', small1: 'small1', small2: 'small2', normal1: 'normal1', normal2: 'normal2', normal3: 'normal3', normal4: 'normal4', normal5: 'normal5', normal6: 'normal6', normal7: 'normal7', wide1: 'wide1', wide2: 'wide2', wide3: 'wide3', wide4: 'wide4', wide5: 'wide5', wide6: 'wide6', wide7: 'wide7', wide8: 'wide8', wide9: 'wide9', wide10: 'wide10', wide11: 'wide11'};const Paging = { leading: 'leading', centered: 'centered', none: ''};const Orientation = { horizontal: 'horizontal', vertical: 'vertical'};function MainPage(request, extra, javascriptConfig, output) { this.request = request; this.extra = extra; this.javascriptConfig = javascriptConfig; this.output = output;}function ModuleRequest(url, method, headers, httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody;}function Extra(commands, extraInfo) { this.commands = commands; this.extraInfo = extraInfo;}function Commands(commandName, params) { this.commandName = commandName; this.params = params;}function JavascriptConfig(removeJavascript, loadInWebView, javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript;}function KeyValue(key, value) { this.key = key; this.value = value;}function Output(cellDesing, orientation, defaultLayout, paging, section, layout, data) { this.cellDesing = cellDesing; this.orientation = orientation; this.defaultLayout = defaultLayout; this.paging = paging; this.section = section; this.layout = layout; this.data = data;}function Section(sectionName, separator) { this.sectionName = sectionName; this.separator = separator;}function Layout(insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing) { this.insets = insets; this.visibleCellsWidthS = visibleCellsWidthS; this.visibleCellsWidthM = visibleCellsWidthM; this.visibleCellsWidthL = visibleCellsWidthL; this.visibleCellsHeight = visibleCellsHeight; this.heightForVisibleCells = heightForVisibleCells; this.cellSize = cellSize; this.ratio = ratio; this.constant = constant; this.horizontalSpacing = horizontalSpacing; this.verticalSpacing = verticalSpacing;}function Insets(top, bottom, left, right) { this.top = top; this.bottom = bottom; this.left = left; this.right = right;}function Size(width, height) { this.width = width; this.height = height;}function Ratio(inRelation, number1, number2) { this.inRelation = inRelation; this.number1 = number1; this.number2 = number2;}function Data(image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView) { this.image = image; this.title = title; this.description = description; this.field1 = field1; this.field2 = field2; this.field3 = field3; this.field4 = field4; this.isChapter = isChapter; this.link = link; this.openInWebView = openInWebView;}function quickData(link, image, title, field1) { return new Data(image, title, 'unknown', field1, 'unknown', 'unknown', 'unknown', false, link);}function shuffle(a) { var j, x, i; for (i = a.length - 1; i > 0; i--) { j = Math.floor(Math.random() * (i + 1)); x = a[i]; a[i] = a[j]; a[j] = x; } return a;}var savedData = document.getElementById('ketsu-final-data');var parsedJson = JSON.parse(savedData.innerHTML);let output = [];var emptyKeyValue = [new KeyValue('', '')];const pop = [];popchap = document.querySelectorAll('.hothome div.bs'); for (list of popchap) { let title = list.querySelector('.tt').textContent; var link = list.querySelector('a').href; link = new ModuleRequest(link, 'get', emptyKeyValue, null); var image = list.querySelector('img').src; image = new ModuleRequest(image, 'get', emptyKeyValue, null); var ep = list.querySelector('.epxs').textContent; pop.push(new Data(image, title, '', ep, '', '', '', false, link)); } const lastchap = []; lastchapchap = document.querySelectorAll('div.uta'); for (list of lastchapchap) { let title = list.querySelector('h4').textContent; var link = list.querySelector('a').href; link = new ModuleRequest(link, 'get', emptyKeyValue, null); var image = list.querySelector('img').src; image = new ModuleRequest(image, 'get', emptyKeyValue, null); var ep =''; try { ep = list.querySelector('ul li').innerText.split('\\n')[0]; } catch{} lastchap.push(new Data(image, title, '', ep, '', '', '', false, link)); } const commands = [ new Commands('variable', [ new KeyValue('data_pop', pop), new KeyValue('data_last', lastchap), new KeyValue('current', parsedJson.request.url) ])];let MainPageObject = new MainPage(new ModuleRequest('', 'get', emptyKeyValue, null), new Extra('', emptyKeyValue), new JavascriptConfig(true, false, ''), output);var finalJson = JSON.stringify(MainPageObject);savedData.innerHTML = finalJson;"
          }
        }
      ]
    }
  ]
}
